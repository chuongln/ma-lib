import { Component, forwardRef, Input, Optional, } from '@angular/core';
import { FormControl, FormsModule, NG_VALUE_ACCESSOR, ReactiveFormsModule } from '@angular/forms';
import { BaseControlValueAccessor } from '../base-control-value-accessor';
import { InputTextModule } from 'primeng/inputtext';
import { OverlayPanelModule } from 'primeng/overlaypanel';
import { CalendarModule } from 'primeng/calendar';
import { MaLibModule } from '../../../ma-lib.module';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "@ngx-translate/core";
import * as i4 from "primeng/calendar";
import * as i5 from "primeng/button";
import * as i6 from "primeng/overlaypanel";
export class DateRangePickerComponent extends BaseControlValueAccessor {
    constructor(controlContainer) {
        super(controlContainer);
        this.controlContainer = controlContainer;
        this.selectedDateRange = null;
        this.selectedDateRangePanel = null;
        this.fromTime = '00:00';
        this.toTime = '23:59';
        this.selectedInterval = null;
        this.label = '';
        this.type = 'date';
        this.showTime = true;
        this.intervals = [
            { key: 'today', label: 'today' },
            { key: 'yesterday', label: 'yesterday' },
            { key: 'currentWeek', label: 'currentWeek' },
            { key: 'lastWeek', label: 'lastWeek' },
            { key: 'currentMonth', label: 'currentMonth' },
            { key: 'lastMonth', label: 'lastMonth' },
            { key: 'custom', label: 'custom' },
        ];
    }
    get formGroup() {
        return this.controlContainer?.control;
    }
    ngOnInit() {
        this.dateRangeInput = new FormControl(null);
        this.dateRangeInput.valueChanges.subscribe(() => {
            if (this.dateRangeInput.value && this.dateRangeInput.value.length === 2) {
                const [fromDate, toDate] = this.dateRangeInput.value;
                const oneYearInMillis = 365 * 24 * 60 * 60 * 1000;
                if (toDate && (toDate.getTime() - fromDate.getTime() > oneYearInMillis)) {
                    const adjustedToDate = new Date(fromDate.getTime() + oneYearInMillis);
                    this.dateRangeInput.setValue([fromDate, adjustedToDate], { emitEvent: false });
                }
            }
            if (this.dateRangeInput.value && this.dateRangeInput.value.length == 2 && this.dateRangeInput.value[0] && !this.dateRangeInput.value[1]) {
                this.selectedInterval = 'custom';
            }
            this.checkDate();
            if (this.dateRangeInput.value && (this.dateRangeInput.value.length > 0)) {
                this.viewDate();
            }
        });
        if (this.selectedInterval) {
            this.selectTimeInterval(this.selectedInterval);
            let startDate = new Date(this.dateRangeInput.value[0]);
            startDate = new Date(startDate.setHours(Number(this.fromTime?.split(':')[0]), Number(this.fromTime?.split(':')[1])));
            let endDate = new Date(this.dateRangeInput.value[1]);
            endDate = new Date(endDate.setHours(Number(this.toTime?.split(':')[0]), Number(this.toTime?.split(':')[1])));
            this.control.setValue([startDate, endDate]);
            this.selectedDateRange = this.selectedDateRangePanel;
        }
    }
    openPanel() {
        this.dateRangeInput.setValue(this.control.value);
    }
    checkDate() {
        setTimeout(() => {
            let container = document.querySelector('.p-datepicker-group-container');
            if (this.type === 'month') {
                container = document.querySelector('.p-monthpicker');
            }
            if (!container)
                return;
            const childDivs = container.querySelectorAll('.range-date-picker');
            const childDiv2s = container.querySelectorAll('.range-date-picker');
            childDivs.forEach(div => {
                div.classList.remove('range-date-picker', 'range-date-picker');
            });
            childDiv2s.forEach(div => {
                div.classList.remove('range-date-picker', 'range-date-picker');
            });
            if (this.dateRangeInput.value && (this.dateRangeInput.value.length > 0)) {
                const labels = container.querySelectorAll('span.p-highlight:not(.p-disabled)');
                if (labels.length > 0) {
                    if (this.type === 'month') {
                        labels[0].classList.add('range-date-picker');
                        labels[labels.length - 1].classList.add('range-date-picker');
                    }
                    else {
                        labels[0].parentElement.classList.add('range-date-picker');
                        labels[labels.length - 1].parentElement.classList.add('range-date-picker');
                    }
                }
            }
        }, 50);
    }
    viewDate() {
        const dateRange = this.dateRangeInput.value;
        if (dateRange && dateRange.length === 2 && dateRange[1] && dateRange[0]) {
            const [startDate, endDate] = dateRange;
            this.selectedDateRangePanel = `${this.formatDate(startDate, this.fromTime)} - ${this.formatDate(endDate, this.toTime)}`;
        }
        this.checkDate();
    }
    applyDateRange() {
        if (this.dateRangeInput.value && this.dateRangeInput.value.length === 2) {
            const [startDate, endDate] = this.dateRangeInput.value;
            if (!endDate) {
                this.dateRangeInput.setValue([startDate, startDate]);
            }
            let startDate1 = new Date(this.dateRangeInput.value[0]);
            startDate1 = new Date(startDate1.setHours(Number(this.fromTime?.split(':')[0]), Number(this.fromTime?.split(':')[1])));
            let endDate1 = new Date(this.dateRangeInput.value[1]);
            endDate1 = new Date(endDate1.setHours(Number(this.toTime?.split(':')[0]), Number(this.toTime?.split(':')[1])));
            this.control.setValue([startDate1, endDate1]);
            this.selectedDateRange = this.selectedDateRangePanel;
        }
        this.checkDate();
    }
    onTimeChange() {
        this.dateRangeInput.setValue(this.dateRangeInput.value);
    }
    formatDate(date, time) {
        const day = String(date.getDate()).padStart(2, '0');
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const year = date.getFullYear();
        if (time) {
            const [hours, minutes] = time.split(':');
            date.setHours(Number(hours), Number(minutes));
        }
        const hours = String(date.getHours() % 12 || 12).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');
        const ampm = date.getHours() >= 12 ? 'PM' : 'AM';
        if (this.type === 'month') {
            return `${month}/${year}`;
        }
        if (this.showTime) {
            return `${day}/${month}/${year} ${hours}:${minutes} ${ampm}`;
        }
        else
            return `${day}/${month}/${year}  `;
    }
    selectTimeInterval(interval) {
        this.selectedInterval = interval;
        const now = new Date();
        const nowe = new Date();
        now.setHours(0, 0, 0, 0);
        nowe.setHours(23, 59, 59, 999);
        let startDate;
        let endDate = nowe;
        switch (interval) {
            case 'today':
                startDate = new Date(now.setHours(0, 0, 0, 0));
                endDate = new Date(now.setHours(23, 59, 59, 999));
                break;
            case 'yesterday':
                startDate = new Date(now.setDate(now.getDate() - 1));
                startDate.setHours(0, 0, 0, 0);
                endDate = new Date(now.setHours(23, 59, 59, 999));
                break;
            case 'currentWeek':
                const currentDay = now.getDay();
                const diffToMonday = currentDay === 0 ? 6 : currentDay - 1;
                startDate = new Date(now.setDate(now.getDate() - diffToMonday));
                startDate.setHours(0, 0, 0, 0);
                endDate = new Date();
                endDate.setHours(23, 59, 59, 999);
                break;
            case 'lastWeek':
                const lastWeekStart = new Date(now.setDate(now.getDate() - now.getDay() - 6));
                startDate = new Date(lastWeekStart.setHours(0, 0, 0, 0));
                const lastWeekEnd = new Date(now.setDate(lastWeekStart.getDate() + 6));
                endDate = new Date(lastWeekEnd.setHours(23, 59, 59, 999));
                break;
            case 'currentMonth':
                startDate = new Date(now.getFullYear(), now.getMonth(), 1, 0, 0, 0, 0);
                endDate = new Date();
                endDate.setHours(23, 59, 59, 999);
                break;
            case 'lastMonth':
                startDate = new Date(now.getFullYear(), now.getMonth() - 1, 1, 0, 0, 0, 0);
                endDate = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);
                break;
            case 'custom':
            default:
                return;
        }
        this.dateRangeInput.setValue([startDate, endDate]);
        this.selectedDateRangePanel = `${this.formatDate(startDate, this.fromTime)} - ${this.formatDate(endDate, this.toTime)}`;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DateRangePickerComponent, deps: [{ token: i1.ControlContainer, optional: true }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: DateRangePickerComponent, isStandalone: true, selector: "date-range-picker", inputs: { selectedInterval: "selectedInterval", label: "label", maxDate: "maxDate", minDate: "minDate", type: "type", showTime: "showTime" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => DateRangePickerComponent),
                multi: true,
            },
        ], usesInheritance: true, ngImport: i0, template: "<p-overlayPanel #dateRangePanel [showCloseIcon]=\"false\" (onShow)=\"openPanel()\"\n  [style]=\"{width: type==='date'?'688px':''}\">\n  <div class=\"date-range-picker  date-range-picker-container \">\n    <ng-container *ngIf=\"type==='date'\">\n      <div class=\"time-intervals\">\n        <ul>\n          <li *ngFor=\"let interval of intervals\" (click)=\"selectTimeInterval(interval.key)\"\n            [class.active]=\"selectedInterval === interval.key\">\n            {{ interval.label | translate }}\n          </li>\n        </ul>\n\n      </div>\n      <div class=\"calendar-container\">\n        <p-calendar [firstDayOfWeek]=\"1\" [formControl]=\"dateRangeInput\" [inline]=\"true\" class=\"max-w-full\"\n          [numberOfMonths]=\"2\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [selectionMode]=\"'range'\"\n          [rangeSeparator]=\"' - '\" [dateFormat]=\"'dd/mm/yy'\" [placeholder]=\"'Select Date Range'\"\n          appendTo=\"body\"></p-calendar>\n        <div class=\"time-input-container\">\n          <input type=\"time\" class=\"time-input\" (change)=\"onTimeChange()\" [(ngModel)]=\"fromTime\" />\n          <input type=\"time\" class=\"time-input\" (change)=\"onTimeChange()\" [(ngModel)]=\"toTime\" />\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"type==='month'\">\n      <div class=\"calendar-container calendar-container-month\">\n        <p-calendar [formControl]=\"dateRangeInput\" [inline]=\"true\" class=\"max-w-full\" [monthNavigator]=\"true\"\n          [yearNavigator]=\"true\" [view]=\"'month'\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [selectionMode]=\"'range'\"\n          [rangeSeparator]=\"' - '\" [dateFormat]=\"'dd/mm/yy'\" [placeholder]=\"'Select Date Range'\"\n          appendTo=\"body\"></p-calendar>\n      </div>\n    </ng-container>\n  </div>\n\n  <div class=\"date-range-actions\">\n    <span class=\"date-range-value\">{{ selectedDateRangePanel }}</span>\n    <button pButton type=\"button\" [label]=\"'cancel'| translate\" class=\"p-button-secondary\"\n      (click)=\"dateRangePanel.hide()\"></button>\n    <button pButton type=\"button\" [label]=\"'apply'| translate\" class=\"p-button-primary\"\n      (click)=\"applyDateRange(); dateRangePanel.hide()\"></button>\n  </div>\n</p-overlayPanel>\n\n<button type=\"button\" pButton (click)=\"dateRangePanel.toggle($event)\" class=\"p-button-text button-custom-date-range\">\n  <div class=\"float-label-container\">\n    <label class=\"float-label\">{{label || 'Date'}}</label>\n    <i class=\"pi pi-chevron-down arrow-icon\" [class.open]=\"dateRangePanel.overlayVisible\"></i>\n  </div>\n  <div class=\"value-range\">{{ selectedDateRange || 'Select Date Range' }}</div>\n</button>", styles: ["::ng-deep .p-overlaypanel .p-overlaypanel-content:has(.date-range-picker-container){padding:24px 24px 16px}.date-range-picker-container{display:flex}.date-range-picker-container ::ng-deep .p-calendar .p-datepicker{width:unset!important}.date-range-picker-container ::ng-deep .p-datepicker.p-datepicker-multiple-month .p-datepicker-group{border-left:unset!important}.date-range-picker-container ::ng-deep .p-datepicker{border:unset}.date-range-picker-container ::ng-deep .p-datepicker td>span{margin:0}.date-range-picker-container ::ng-deep .p-datepicker table th{padding:2px}.date-range-picker-container ::ng-deep .p-datepicker table td>span{width:34px;height:32px;border-radius:0}.date-range-picker-container ::ng-deep .p-datepicker table td{padding:2px 0}.date-range-picker-container ::ng-deep .p-datepicker table td.range-date-picker span.p-highlight{border-radius:4px;background:#2e6be5!important;color:#fff!important}.date-range-picker-container ::ng-deep .p-datepicker table td.p-datepicker-today span{border-radius:4px;color:#2e6be5;background:#edf3ff}.date-range-picker-container ::ng-deep .p-datepicker table td span.p-highlight{color:#404040;background:#edf3ff}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-header{border-bottom:unset}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-header .p-datepicker-title .p-datepicker-month{margin-right:.5rem!important}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-prev,.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-next{border:1px solid #E6E6E6;border-radius:4px;height:32px;width:32px}.date-range-picker-container ::ng-deep .p-monthpicker .range-date-picker.p-highlight{border-radius:4px!important;background:#2e6be5!important;color:#fff!important}.date-range-picker-container ::ng-deep .p-monthpicker span.p-highlight{color:#404040;border-radius:0;background:#edf3ff}.date-range-picker-container ::ng-deep .p-monthpicker span{margin-top:2px;margin-bottom:2px}.date-range-picker-container .time-intervals{flex:0 0 136px;border-right:1px solid #e6e6e6;padding-right:8px}.date-range-picker-container .time-intervals ul{list-style:none;padding:0;margin:0}.date-range-picker-container .time-intervals ul li{cursor:pointer;padding:14px 0;font-size:14px;color:#333;font-weight:400}.date-range-picker-container .time-intervals ul li:hover,.date-range-picker-container .time-intervals ul li.active{font-weight:600}.date-range-picker-container .calendar-container{flex:1}.date-range-actions{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem;border-top:1px solid #E6E6E6;padding-top:16px;align-items:center}.date-range-actions button{min-width:80px}.date-range-actions .date-range-value{color:#6c6c6c;padding-right:16px}.time-input-container{display:flex;align-items:center;justify-content:space-around;gap:.5rem}.time-input-container .time-input{height:36px;width:222px;text-align:center;border:1px solid #dcdcdc;border-radius:4px;font-size:14px;padding:0 8px}.float-label-container{top:-3px;display:block;font-size:12px;left:2px;color:#6c6c6c}.float-label-container:has(.open){color:#2e6be5}.float-label-container .arrow-icon{font-size:12px;height:12px;margin-left:8px;align-items:center;transition:transform .3s ease}.float-label-container .arrow-icon.open{transform:rotate(180deg)}.button-custom-date-range{padding:0;border:unset!important;box-shadow:unset!important;background:#fff!important;max-width:20vw;text-align:left;display:block}.value-range{color:#404040;font-weight:400;line-height:20px;padding-top:5px;font-size:14px;display:block}\n"], dependencies: [{ kind: "ngmodule", type: MaLibModule }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i3.TranslatePipe, name: "translate" }, { kind: "ngmodule", type: InputTextModule }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "ngmodule", type: CalendarModule }, { kind: "component", type: i4.Calendar, selector: "p-calendar", inputs: ["style", "styleClass", "inputStyle", "inputId", "name", "inputStyleClass", "placeholder", "ariaLabelledBy", "iconAriaLabel", "disabled", "dateFormat", "multipleSeparator", "rangeSeparator", "inline", "showOtherMonths", "selectOtherMonths", "showIcon", "icon", "appendTo", "readonlyInput", "shortYearCutoff", "monthNavigator", "yearNavigator", "hourFormat", "timeOnly", "stepHour", "stepMinute", "stepSecond", "showSeconds", "required", "showOnFocus", "showWeek", "showClear", "dataType", "selectionMode", "maxDateCount", "showButtonBar", "todayButtonStyleClass", "clearButtonStyleClass", "autoZIndex", "baseZIndex", "panelStyleClass", "panelStyle", "keepInvalid", "hideOnDateTimeSelect", "touchUI", "timeSeparator", "focusTrap", "showTransitionOptions", "hideTransitionOptions", "tabindex", "minDate", "maxDate", "disabledDates", "disabledDays", "yearRange", "showTime", "responsiveOptions", "numberOfMonths", "firstDayOfWeek", "locale", "view", "defaultDate"], outputs: ["onFocus", "onBlur", "onClose", "onSelect", "onClear", "onInput", "onTodayClick", "onClearClick", "onMonthChange", "onYearChange", "onClickOutside", "onShow"] }, { kind: "directive", type: i5.ButtonDirective, selector: "[pButton]", inputs: ["iconPos", "loadingIcon", "label", "icon", "loading"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i1.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: OverlayPanelModule }, { kind: "component", type: i6.OverlayPanel, selector: "p-overlayPanel", inputs: ["dismissable", "showCloseIcon", "style", "styleClass", "appendTo", "autoZIndex", "ariaCloseLabel", "baseZIndex", "focusOnShow", "showTransitionOptions", "hideTransitionOptions"], outputs: ["onShow", "onHide"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DateRangePickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'date-range-picker', standalone: true, imports: [
                        MaLibModule,
                        InputTextModule,
                        ReactiveFormsModule,
                        CalendarModule,
                        FormsModule,
                        OverlayPanelModule
                    ], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => DateRangePickerComponent),
                            multi: true,
                        },
                    ], template: "<p-overlayPanel #dateRangePanel [showCloseIcon]=\"false\" (onShow)=\"openPanel()\"\n  [style]=\"{width: type==='date'?'688px':''}\">\n  <div class=\"date-range-picker  date-range-picker-container \">\n    <ng-container *ngIf=\"type==='date'\">\n      <div class=\"time-intervals\">\n        <ul>\n          <li *ngFor=\"let interval of intervals\" (click)=\"selectTimeInterval(interval.key)\"\n            [class.active]=\"selectedInterval === interval.key\">\n            {{ interval.label | translate }}\n          </li>\n        </ul>\n\n      </div>\n      <div class=\"calendar-container\">\n        <p-calendar [firstDayOfWeek]=\"1\" [formControl]=\"dateRangeInput\" [inline]=\"true\" class=\"max-w-full\"\n          [numberOfMonths]=\"2\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [selectionMode]=\"'range'\"\n          [rangeSeparator]=\"' - '\" [dateFormat]=\"'dd/mm/yy'\" [placeholder]=\"'Select Date Range'\"\n          appendTo=\"body\"></p-calendar>\n        <div class=\"time-input-container\">\n          <input type=\"time\" class=\"time-input\" (change)=\"onTimeChange()\" [(ngModel)]=\"fromTime\" />\n          <input type=\"time\" class=\"time-input\" (change)=\"onTimeChange()\" [(ngModel)]=\"toTime\" />\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"type==='month'\">\n      <div class=\"calendar-container calendar-container-month\">\n        <p-calendar [formControl]=\"dateRangeInput\" [inline]=\"true\" class=\"max-w-full\" [monthNavigator]=\"true\"\n          [yearNavigator]=\"true\" [view]=\"'month'\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" [selectionMode]=\"'range'\"\n          [rangeSeparator]=\"' - '\" [dateFormat]=\"'dd/mm/yy'\" [placeholder]=\"'Select Date Range'\"\n          appendTo=\"body\"></p-calendar>\n      </div>\n    </ng-container>\n  </div>\n\n  <div class=\"date-range-actions\">\n    <span class=\"date-range-value\">{{ selectedDateRangePanel }}</span>\n    <button pButton type=\"button\" [label]=\"'cancel'| translate\" class=\"p-button-secondary\"\n      (click)=\"dateRangePanel.hide()\"></button>\n    <button pButton type=\"button\" [label]=\"'apply'| translate\" class=\"p-button-primary\"\n      (click)=\"applyDateRange(); dateRangePanel.hide()\"></button>\n  </div>\n</p-overlayPanel>\n\n<button type=\"button\" pButton (click)=\"dateRangePanel.toggle($event)\" class=\"p-button-text button-custom-date-range\">\n  <div class=\"float-label-container\">\n    <label class=\"float-label\">{{label || 'Date'}}</label>\n    <i class=\"pi pi-chevron-down arrow-icon\" [class.open]=\"dateRangePanel.overlayVisible\"></i>\n  </div>\n  <div class=\"value-range\">{{ selectedDateRange || 'Select Date Range' }}</div>\n</button>", styles: ["::ng-deep .p-overlaypanel .p-overlaypanel-content:has(.date-range-picker-container){padding:24px 24px 16px}.date-range-picker-container{display:flex}.date-range-picker-container ::ng-deep .p-calendar .p-datepicker{width:unset!important}.date-range-picker-container ::ng-deep .p-datepicker.p-datepicker-multiple-month .p-datepicker-group{border-left:unset!important}.date-range-picker-container ::ng-deep .p-datepicker{border:unset}.date-range-picker-container ::ng-deep .p-datepicker td>span{margin:0}.date-range-picker-container ::ng-deep .p-datepicker table th{padding:2px}.date-range-picker-container ::ng-deep .p-datepicker table td>span{width:34px;height:32px;border-radius:0}.date-range-picker-container ::ng-deep .p-datepicker table td{padding:2px 0}.date-range-picker-container ::ng-deep .p-datepicker table td.range-date-picker span.p-highlight{border-radius:4px;background:#2e6be5!important;color:#fff!important}.date-range-picker-container ::ng-deep .p-datepicker table td.p-datepicker-today span{border-radius:4px;color:#2e6be5;background:#edf3ff}.date-range-picker-container ::ng-deep .p-datepicker table td span.p-highlight{color:#404040;background:#edf3ff}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-header{border-bottom:unset}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-header .p-datepicker-title .p-datepicker-month{margin-right:.5rem!important}.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-prev,.date-range-picker-container ::ng-deep .p-datepicker .p-datepicker-next{border:1px solid #E6E6E6;border-radius:4px;height:32px;width:32px}.date-range-picker-container ::ng-deep .p-monthpicker .range-date-picker.p-highlight{border-radius:4px!important;background:#2e6be5!important;color:#fff!important}.date-range-picker-container ::ng-deep .p-monthpicker span.p-highlight{color:#404040;border-radius:0;background:#edf3ff}.date-range-picker-container ::ng-deep .p-monthpicker span{margin-top:2px;margin-bottom:2px}.date-range-picker-container .time-intervals{flex:0 0 136px;border-right:1px solid #e6e6e6;padding-right:8px}.date-range-picker-container .time-intervals ul{list-style:none;padding:0;margin:0}.date-range-picker-container .time-intervals ul li{cursor:pointer;padding:14px 0;font-size:14px;color:#333;font-weight:400}.date-range-picker-container .time-intervals ul li:hover,.date-range-picker-container .time-intervals ul li.active{font-weight:600}.date-range-picker-container .calendar-container{flex:1}.date-range-actions{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem;border-top:1px solid #E6E6E6;padding-top:16px;align-items:center}.date-range-actions button{min-width:80px}.date-range-actions .date-range-value{color:#6c6c6c;padding-right:16px}.time-input-container{display:flex;align-items:center;justify-content:space-around;gap:.5rem}.time-input-container .time-input{height:36px;width:222px;text-align:center;border:1px solid #dcdcdc;border-radius:4px;font-size:14px;padding:0 8px}.float-label-container{top:-3px;display:block;font-size:12px;left:2px;color:#6c6c6c}.float-label-container:has(.open){color:#2e6be5}.float-label-container .arrow-icon{font-size:12px;height:12px;margin-left:8px;align-items:center;transition:transform .3s ease}.float-label-container .arrow-icon.open{transform:rotate(180deg)}.button-custom-date-range{padding:0;border:unset!important;box-shadow:unset!important;background:#fff!important;max-width:20vw;text-align:left;display:block}.value-range{color:#404040;font-weight:400;line-height:20px;padding-top:5px;font-size:14px;display:block}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ControlContainer, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { selectedInterval: [{
                type: Input
            }], label: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], minDate: [{
                type: Input
            }], type: [{
                type: Input
            }], showTime: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWEtbGliL3NyYy9saWIvY29tcG9uZW50L2Zvcm0vZGF0ZS1waWNrZXIvZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWEtbGliL3NyYy9saWIvY29tcG9uZW50L2Zvcm0vZGF0ZS1waWNrZXIvZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxVQUFVLEVBQ1YsS0FBSyxFQUVMLFFBQVEsR0FFVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQW9CLFdBQVcsRUFBYSxXQUFXLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMvSCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUMxRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDcEQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQzs7Ozs7Ozs7QUF1QnJELE1BQU0sT0FBTyx3QkFBeUIsU0FBUSx3QkFBd0I7SUFnQnBFLFlBQXdDLGdCQUFrQztRQUN4RSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQURjLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUFkMUUsc0JBQWlCLEdBQWtCLElBQUksQ0FBQztRQUN4QywyQkFBc0IsR0FBa0IsSUFBSSxDQUFDO1FBQzdDLGFBQVEsR0FBa0IsT0FBTyxDQUFDO1FBQ2xD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RUFBRSxDQUFDO0lBQzFILENBQUM7K0dBNUxVLHdCQUF3QjttR0FBeEIsd0JBQXdCLDhNQVJ4QjtZQUNUO2dCQUNFLE9BQU8sRUFBRSxpQkFBaUI7Z0JBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsd0JBQXdCLENBQUM7Z0JBQ3ZELEtBQUssRUFBRSxJQUFJO2FBQ1o7U0FDRixpRENuQ0gsK3BGQWlEUywwakhENUJMLFdBQVcsNFRBQ1gsZUFBZSw4QkFDZixtQkFBbUIseWtCQUNuQixjQUFjLDYxQ0FDZCxXQUFXLHNQQUNYLGtCQUFrQjs7NEZBV1Qsd0JBQXdCO2tCQXJCcEMsU0FBUzsrQkFDRSxtQkFBbUIsY0FFakIsSUFBSSxXQUNQO3dCQUNQLFdBQVc7d0JBQ1gsZUFBZTt3QkFDZixtQkFBbUI7d0JBQ25CLGNBQWM7d0JBQ2QsV0FBVzt3QkFDWCxrQkFBa0I7cUJBQ25CLGFBRVU7d0JBQ1Q7NEJBQ0UsT0FBTyxFQUFFLGlCQUFpQjs0QkFDMUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUseUJBQXlCLENBQUM7NEJBQ3ZELEtBQUssRUFBRSxJQUFJO3lCQUNaO3FCQUNGOzswQkFrQlksUUFBUTs0Q0FUWixnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csS0FBSztzQkFBYixLQUFLO2dCQUVHLE9BQU87c0JBQWYsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUVHLFFBQVE7c0JBQWhCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3B0aW9uYWwsXG4gIE91dHB1dCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyLCBGb3JtQ29udHJvbCwgRm9ybUdyb3VwLCBGb3Jtc01vZHVsZSwgTkdfVkFMVUVfQUNDRVNTT1IsIFJlYWN0aXZlRm9ybXNNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBCYXNlQ29udHJvbFZhbHVlQWNjZXNzb3IgfSBmcm9tICcuLi9iYXNlLWNvbnRyb2wtdmFsdWUtYWNjZXNzb3InO1xuaW1wb3J0IHsgSW5wdXRUZXh0TW9kdWxlIH0gZnJvbSAncHJpbWVuZy9pbnB1dHRleHQnO1xuaW1wb3J0IHsgT3ZlcmxheVBhbmVsTW9kdWxlIH0gZnJvbSAncHJpbWVuZy9vdmVybGF5cGFuZWwnO1xuaW1wb3J0IHsgQ2FsZW5kYXJNb2R1bGUgfSBmcm9tICdwcmltZW5nL2NhbGVuZGFyJztcbmltcG9ydCB7IE1hTGliTW9kdWxlIH0gZnJvbSAnLi4vLi4vLi4vbWEtbGliLm1vZHVsZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2RhdGUtcmFuZ2UtcGlja2VyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2RhdGUtcmFuZ2UtcGlja2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIE1hTGliTW9kdWxlLFxuICAgIElucHV0VGV4dE1vZHVsZSxcbiAgICBSZWFjdGl2ZUZvcm1zTW9kdWxlLFxuICAgIENhbGVuZGFyTW9kdWxlLFxuICAgIEZvcm1zTW9kdWxlLFxuICAgIE92ZXJsYXlQYW5lbE1vZHVsZVxuICBdLFxuICBzdHlsZVVybHM6IFsnZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBEYXRlUmFuZ2VQaWNrZXJDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWUsXG4gICAgfSxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgRGF0ZVJhbmdlUGlja2VyQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbnRyb2xWYWx1ZUFjY2Vzc29yIGltcGxlbWVudHMgT25Jbml0IHtcblxuICBzZWxlY3RlZERhdGVSYW5nZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHNlbGVjdGVkRGF0ZVJhbmdlUGFuZWw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBmcm9tVGltZTogc3RyaW5nIHwgbnVsbCA9ICcwMDowMCc7XG4gIHRvVGltZTogc3RyaW5nIHwgbnVsbCA9ICcyMzo1OSc7XG4gIGRhdGVSYW5nZUlucHV0OiBGb3JtQ29udHJvbDtcbiAgQElucHV0KCkgc2VsZWN0ZWRJbnRlcnZhbDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmcgPSAnJztcblxuICBASW5wdXQoKSBtYXhEYXRlOiBEYXRlO1xuICBASW5wdXQoKSBtaW5EYXRlOiBEYXRlO1xuICBASW5wdXQoKSB0eXBlOiAnZGF0ZScgfCAnbW9udGgnID0gJ2RhdGUnO1xuXG4gIEBJbnB1dCgpIHNob3dUaW1lOiBib29sZWFuID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBwdWJsaWMgb3ZlcnJpZGUgY29udHJvbENvbnRhaW5lcjogQ29udHJvbENvbnRhaW5lcikge1xuICAgIHN1cGVyKGNvbnRyb2xDb250YWluZXIpO1xuICB9XG5cbiAgZ2V0IGZvcm1Hcm91cCgpOiBGb3JtR3JvdXAge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluZXI/LmNvbnRyb2wgYXMgRm9ybUdyb3VwO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5kYXRlUmFuZ2VJbnB1dCA9IG5ldyBGb3JtQ29udHJvbChudWxsKTtcbiAgICB0aGlzLmRhdGVSYW5nZUlucHV0LnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWUgJiYgdGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgY29uc3QgW2Zyb21EYXRlLCB0b0RhdGVdID0gdGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZTtcbiAgICAgICAgY29uc3Qgb25lWWVhckluTWlsbGlzID0gMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgaWYgKHRvRGF0ZSAmJiAodG9EYXRlLmdldFRpbWUoKSAtIGZyb21EYXRlLmdldFRpbWUoKSA+IG9uZVllYXJJbk1pbGxpcykpIHtcbiAgICAgICAgICBjb25zdCBhZGp1c3RlZFRvRGF0ZSA9IG5ldyBEYXRlKGZyb21EYXRlLmdldFRpbWUoKSArIG9uZVllYXJJbk1pbGxpcyk7XG4gICAgICAgICAgdGhpcy5kYXRlUmFuZ2VJbnB1dC5zZXRWYWx1ZShbZnJvbURhdGUsIGFkanVzdGVkVG9EYXRlXSwgeyBlbWl0RXZlbnQ6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZSAmJiB0aGlzLmRhdGVSYW5nZUlucHV0LnZhbHVlLmxlbmd0aCA9PSAyICYmIHRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWVbMF0gJiYgIXRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWVbMV0pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEludGVydmFsID0gJ2N1c3RvbSc7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hlY2tEYXRlKCk7XG4gICAgICBpZiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZSAmJiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZS5sZW5ndGggPiAwKSkge1xuICAgICAgICB0aGlzLnZpZXdEYXRlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRJbnRlcnZhbCkge1xuICAgICAgdGhpcy5zZWxlY3RUaW1lSW50ZXJ2YWwodGhpcy5zZWxlY3RlZEludGVydmFsKTtcbiAgICAgIGxldCBzdGFydERhdGU6IERhdGUgPSBuZXcgRGF0ZSh0aGlzLmRhdGVSYW5nZUlucHV0LnZhbHVlWzBdKTtcbiAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZS5zZXRIb3VycyhOdW1iZXIodGhpcy5mcm9tVGltZT8uc3BsaXQoJzonKVswXSksIE51bWJlcih0aGlzLmZyb21UaW1lPy5zcGxpdCgnOicpWzFdKSkpXG4gICAgICBsZXQgZW5kRGF0ZTogRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWVbMV0pO1xuICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKGVuZERhdGUuc2V0SG91cnMoTnVtYmVyKHRoaXMudG9UaW1lPy5zcGxpdCgnOicpWzBdKSwgTnVtYmVyKHRoaXMudG9UaW1lPy5zcGxpdCgnOicpWzFdKSkpXG4gICAgICB0aGlzLmNvbnRyb2wuc2V0VmFsdWUoW3N0YXJ0RGF0ZSwgZW5kRGF0ZV0pO1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2VQYW5lbDtcblxuICAgIH1cbiAgfVxuICBvcGVuUGFuZWwoKTogdm9pZCB7XG4gICAgdGhpcy5kYXRlUmFuZ2VJbnB1dC5zZXRWYWx1ZSh0aGlzLmNvbnRyb2wudmFsdWUpO1xuICB9XG5cbiAgY2hlY2tEYXRlKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wLWRhdGVwaWNrZXItZ3JvdXAtY29udGFpbmVyJyk7XG4gICAgICBpZiAodGhpcy50eXBlID09PSAnbW9udGgnKSB7XG4gICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wLW1vbnRocGlja2VyJyk7XG4gICAgICB9XG4gICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgY29uc3QgY2hpbGREaXZzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYW5nZS1kYXRlLXBpY2tlcicpXG4gICAgICBjb25zdCBjaGlsZERpdjJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYW5nZS1kYXRlLXBpY2tlcicpXG4gICAgICBjaGlsZERpdnMuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZSgncmFuZ2UtZGF0ZS1waWNrZXInLCAncmFuZ2UtZGF0ZS1waWNrZXInKTtcbiAgICAgIH0pO1xuICAgICAgY2hpbGREaXYycy5mb3JFYWNoKGRpdiA9PiB7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKCdyYW5nZS1kYXRlLXBpY2tlcicsICdyYW5nZS1kYXRlLXBpY2tlcicpO1xuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZSAmJiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZS5sZW5ndGggPiAwKSkge1xuICAgICAgICBjb25zdCBsYWJlbHMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc3Bhbi5wLWhpZ2hsaWdodDpub3QoLnAtZGlzYWJsZWQpJyk7XG4gICAgICAgIGlmIChsYWJlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdtb250aCcpIHtcbiAgICAgICAgICAgIGxhYmVsc1swXS5jbGFzc0xpc3QuYWRkKCdyYW5nZS1kYXRlLXBpY2tlcicpO1xuICAgICAgICAgICAgbGFiZWxzW2xhYmVscy5sZW5ndGggLSAxXS5jbGFzc0xpc3QuYWRkKCdyYW5nZS1kYXRlLXBpY2tlcicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYWJlbHNbMF0ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdyYW5nZS1kYXRlLXBpY2tlcicpO1xuICAgICAgICAgICAgbGFiZWxzW2xhYmVscy5sZW5ndGggLSAxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3JhbmdlLWRhdGUtcGlja2VyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9LCA1MCk7XG5cbiAgfVxuXG4gIHZpZXdEYXRlKCk6IHZvaWQge1xuICAgIGNvbnN0IGRhdGVSYW5nZSA9IHRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWU7XG4gICAgaWYgKGRhdGVSYW5nZSAmJiBkYXRlUmFuZ2UubGVuZ3RoID09PSAyICYmIGRhdGVSYW5nZVsxXSAmJiBkYXRlUmFuZ2VbMF0pIHtcbiAgICAgIGNvbnN0IFtzdGFydERhdGUsIGVuZERhdGVdID0gZGF0ZVJhbmdlO1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZVBhbmVsID0gYCR7dGhpcy5mb3JtYXREYXRlKHN0YXJ0RGF0ZSwgdGhpcy5mcm9tVGltZSl9IC0gJHt0aGlzLmZvcm1hdERhdGUoZW5kRGF0ZSwgdGhpcy50b1RpbWUpfWA7XG4gICAgfVxuICAgIHRoaXMuY2hlY2tEYXRlKCk7XG5cbiAgfVxuICBhcHBseURhdGVSYW5nZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZSAmJiB0aGlzLmRhdGVSYW5nZUlucHV0LnZhbHVlLmxlbmd0aCA9PT0gMikge1xuICAgICAgY29uc3QgW3N0YXJ0RGF0ZSwgZW5kRGF0ZV0gPSB0aGlzLmRhdGVSYW5nZUlucHV0LnZhbHVlO1xuICAgICAgaWYgKCFlbmREYXRlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVJhbmdlSW5wdXQuc2V0VmFsdWUoW3N0YXJ0RGF0ZSwgc3RhcnREYXRlXSk7XG4gICAgICB9XG4gICAgICBsZXQgc3RhcnREYXRlMTogRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0ZVJhbmdlSW5wdXQudmFsdWVbMF0pO1xuICAgICAgc3RhcnREYXRlMSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZTEuc2V0SG91cnMoTnVtYmVyKHRoaXMuZnJvbVRpbWU/LnNwbGl0KCc6JylbMF0pLCBOdW1iZXIodGhpcy5mcm9tVGltZT8uc3BsaXQoJzonKVsxXSkpKVxuICAgICAgbGV0IGVuZERhdGUxOiBEYXRlID0gbmV3IERhdGUodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZVsxXSk7XG4gICAgICBlbmREYXRlMSA9IG5ldyBEYXRlKGVuZERhdGUxLnNldEhvdXJzKE51bWJlcih0aGlzLnRvVGltZT8uc3BsaXQoJzonKVswXSksIE51bWJlcih0aGlzLnRvVGltZT8uc3BsaXQoJzonKVsxXSkpKVxuICAgICAgdGhpcy5jb250cm9sLnNldFZhbHVlKFtzdGFydERhdGUxLCBlbmREYXRlMV0pO1xuICAgICAgdGhpcy5zZWxlY3RlZERhdGVSYW5nZSA9IHRoaXMuc2VsZWN0ZWREYXRlUmFuZ2VQYW5lbDtcbiAgICB9XG4gICAgdGhpcy5jaGVja0RhdGUoKTtcblxuICB9XG5cbiAgb25UaW1lQ2hhbmdlKCkge1xuICAgIHRoaXMuZGF0ZVJhbmdlSW5wdXQuc2V0VmFsdWUodGhpcy5kYXRlUmFuZ2VJbnB1dC52YWx1ZSk7XG4gIH1cblxuICBmb3JtYXREYXRlKGRhdGU6IERhdGUsIHRpbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBpZiAodGltZSkge1xuICAgICAgY29uc3QgW2hvdXJzLCBtaW51dGVzXSA9IHRpbWUuc3BsaXQoJzonKTtcbiAgICAgIGRhdGUuc2V0SG91cnMoTnVtYmVyKGhvdXJzKSwgTnVtYmVyKG1pbnV0ZXMpKTtcbiAgICB9XG4gICAgY29uc3QgaG91cnMgPSBTdHJpbmcoZGF0ZS5nZXRIb3VycygpICUgMTIgfHwgMTIpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgbWludXRlcyA9IFN0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICBjb25zdCBhbXBtID0gZGF0ZS5nZXRIb3VycygpID49IDEyID8gJ1BNJyA6ICdBTSc7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ21vbnRoJykge1xuICAgICAgcmV0dXJuIGAke21vbnRofS8ke3llYXJ9YDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2hvd1RpbWUpIHtcbiAgICAgIHJldHVybiBgJHtkYXl9LyR7bW9udGh9LyR7eWVhcn0gJHtob3Vyc306JHttaW51dGVzfSAke2FtcG19YDtcbiAgICB9IGVsc2VcbiAgICAgIHJldHVybiBgJHtkYXl9LyR7bW9udGh9LyR7eWVhcn0gIGA7XG4gIH1cbiAgc2VsZWN0VGltZUludGVydmFsKGludGVydmFsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkSW50ZXJ2YWwgPSBpbnRlcnZhbDtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG5vd2UgPSBuZXcgRGF0ZSgpO1xuICAgIG5vdy5zZXRIb3VycygwLCAwLCAwLCAwKVxuICAgIG5vd2Uuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KVxuICAgIGxldCBzdGFydERhdGU6IERhdGU7XG4gICAgbGV0IGVuZERhdGU6IERhdGUgPSBub3dlO1xuXG4gICAgc3dpdGNoIChpbnRlcnZhbCkge1xuICAgICAgY2FzZSAndG9kYXknOlxuICAgICAgICBzdGFydERhdGUgPSBuZXcgRGF0ZShub3cuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICBlbmREYXRlID0gbmV3IERhdGUobm93LnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3llc3RlcmRheSc6XG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSAxKSk7XG4gICAgICAgIHN0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKG5vdy5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjdXJyZW50V2Vlayc6XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXkgPSBub3cuZ2V0RGF5KCk7XG4gICAgICAgIGNvbnN0IGRpZmZUb01vbmRheSA9IGN1cnJlbnREYXkgPT09IDAgPyA2IDogY3VycmVudERheSAtIDE7XG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBkaWZmVG9Nb25kYXkpKTtcbiAgICAgICAgc3RhcnREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICBlbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgZW5kRGF0ZS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2xhc3RXZWVrJzpcbiAgICAgICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKG5vdy5nZXREYXRlKCkgLSBub3cuZ2V0RGF5KCkgLSA2KSk7XG4gICAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGxhc3RXZWVrU3RhcnQuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICBjb25zdCBsYXN0V2Vla0VuZCA9IG5ldyBEYXRlKG5vdy5zZXREYXRlKGxhc3RXZWVrU3RhcnQuZ2V0RGF0ZSgpICsgNikpO1xuICAgICAgICBlbmREYXRlID0gbmV3IERhdGUobGFzdFdlZWtFbmQuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3VycmVudE1vbnRoJzpcbiAgICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCAxLCAwLCAwLCAwLCAwKTtcbiAgICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsYXN0TW9udGgnOlxuICAgICAgICBzdGFydERhdGUgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCkgLSAxLCAxLCAwLCAwLCAwLCAwKTtcbiAgICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMCwgMjMsIDU5LCA1OSwgOTk5KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdjdXN0b20nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRhdGVSYW5nZUlucHV0LnNldFZhbHVlKFtzdGFydERhdGUsIGVuZERhdGVdKTtcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVJhbmdlUGFuZWwgPSBgJHt0aGlzLmZvcm1hdERhdGUoc3RhcnREYXRlLCB0aGlzLmZyb21UaW1lKX0gLSAke3RoaXMuZm9ybWF0RGF0ZShlbmREYXRlLCB0aGlzLnRvVGltZSl9YDtcbiAgfVxuICBpbnRlcnZhbHMgPSBbXG4gICAgeyBrZXk6ICd0b2RheScsIGxhYmVsOiAndG9kYXknIH0sXG4gICAgeyBrZXk6ICd5ZXN0ZXJkYXknLCBsYWJlbDogJ3llc3RlcmRheScgfSxcbiAgICB7IGtleTogJ2N1cnJlbnRXZWVrJywgbGFiZWw6ICdjdXJyZW50V2VlaycgfSxcbiAgICB7IGtleTogJ2xhc3RXZWVrJywgbGFiZWw6ICdsYXN0V2VlaycgfSxcbiAgICB7IGtleTogJ2N1cnJlbnRNb250aCcsIGxhYmVsOiAnY3VycmVudE1vbnRoJyB9LFxuICAgIHsga2V5OiAnbGFzdE1vbnRoJywgbGFiZWw6ICdsYXN0TW9udGgnIH0sXG4gICAgeyBrZXk6ICdjdXN0b20nLCBsYWJlbDogJ2N1c3RvbScgfSxcbiAgXTtcbn1cbiIsIjxwLW92ZXJsYXlQYW5lbCAjZGF0ZVJhbmdlUGFuZWwgW3Nob3dDbG9zZUljb25dPVwiZmFsc2VcIiAob25TaG93KT1cIm9wZW5QYW5lbCgpXCJcbiAgW3N0eWxlXT1cInt3aWR0aDogdHlwZT09PSdkYXRlJz8nNjg4cHgnOicnfVwiPlxuICA8ZGl2IGNsYXNzPVwiZGF0ZS1yYW5nZS1waWNrZXIgIGRhdGUtcmFuZ2UtcGlja2VyLWNvbnRhaW5lciBcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidHlwZT09PSdkYXRlJ1wiPlxuICAgICAgPGRpdiBjbGFzcz1cInRpbWUtaW50ZXJ2YWxzXCI+XG4gICAgICAgIDx1bD5cbiAgICAgICAgICA8bGkgKm5nRm9yPVwibGV0IGludGVydmFsIG9mIGludGVydmFsc1wiIChjbGljayk9XCJzZWxlY3RUaW1lSW50ZXJ2YWwoaW50ZXJ2YWwua2V5KVwiXG4gICAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cInNlbGVjdGVkSW50ZXJ2YWwgPT09IGludGVydmFsLmtleVwiPlxuICAgICAgICAgICAge3sgaW50ZXJ2YWwubGFiZWwgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICA8L2xpPlxuICAgICAgICA8L3VsPlxuXG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1jb250YWluZXJcIj5cbiAgICAgICAgPHAtY2FsZW5kYXIgW2ZpcnN0RGF5T2ZXZWVrXT1cIjFcIiBbZm9ybUNvbnRyb2xdPVwiZGF0ZVJhbmdlSW5wdXRcIiBbaW5saW5lXT1cInRydWVcIiBjbGFzcz1cIm1heC13LWZ1bGxcIlxuICAgICAgICAgIFtudW1iZXJPZk1vbnRoc109XCIyXCIgW21pbkRhdGVdPVwibWluRGF0ZVwiIFttYXhEYXRlXT1cIm1heERhdGVcIiBbc2VsZWN0aW9uTW9kZV09XCIncmFuZ2UnXCJcbiAgICAgICAgICBbcmFuZ2VTZXBhcmF0b3JdPVwiJyAtICdcIiBbZGF0ZUZvcm1hdF09XCInZGQvbW0veXknXCIgW3BsYWNlaG9sZGVyXT1cIidTZWxlY3QgRGF0ZSBSYW5nZSdcIlxuICAgICAgICAgIGFwcGVuZFRvPVwiYm9keVwiPjwvcC1jYWxlbmRhcj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRpbWUtaW5wdXQtY29udGFpbmVyXCI+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0aW1lXCIgY2xhc3M9XCJ0aW1lLWlucHV0XCIgKGNoYW5nZSk9XCJvblRpbWVDaGFuZ2UoKVwiIFsobmdNb2RlbCldPVwiZnJvbVRpbWVcIiAvPlxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGltZVwiIGNsYXNzPVwidGltZS1pbnB1dFwiIChjaGFuZ2UpPVwib25UaW1lQ2hhbmdlKClcIiBbKG5nTW9kZWwpXT1cInRvVGltZVwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInR5cGU9PT0nbW9udGgnXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItY29udGFpbmVyIGNhbGVuZGFyLWNvbnRhaW5lci1tb250aFwiPlxuICAgICAgICA8cC1jYWxlbmRhciBbZm9ybUNvbnRyb2xdPVwiZGF0ZVJhbmdlSW5wdXRcIiBbaW5saW5lXT1cInRydWVcIiBjbGFzcz1cIm1heC13LWZ1bGxcIiBbbW9udGhOYXZpZ2F0b3JdPVwidHJ1ZVwiXG4gICAgICAgICAgW3llYXJOYXZpZ2F0b3JdPVwidHJ1ZVwiIFt2aWV3XT1cIidtb250aCdcIiBbbWluRGF0ZV09XCJtaW5EYXRlXCIgW21heERhdGVdPVwibWF4RGF0ZVwiIFtzZWxlY3Rpb25Nb2RlXT1cIidyYW5nZSdcIlxuICAgICAgICAgIFtyYW5nZVNlcGFyYXRvcl09XCInIC0gJ1wiIFtkYXRlRm9ybWF0XT1cIidkZC9tbS95eSdcIiBbcGxhY2Vob2xkZXJdPVwiJ1NlbGVjdCBEYXRlIFJhbmdlJ1wiXG4gICAgICAgICAgYXBwZW5kVG89XCJib2R5XCI+PC9wLWNhbGVuZGFyPlxuICAgICAgPC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJkYXRlLXJhbmdlLWFjdGlvbnNcIj5cbiAgICA8c3BhbiBjbGFzcz1cImRhdGUtcmFuZ2UtdmFsdWVcIj57eyBzZWxlY3RlZERhdGVSYW5nZVBhbmVsIH19PC9zcGFuPlxuICAgIDxidXR0b24gcEJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgW2xhYmVsXT1cIidjYW5jZWwnfCB0cmFuc2xhdGVcIiBjbGFzcz1cInAtYnV0dG9uLXNlY29uZGFyeVwiXG4gICAgICAoY2xpY2spPVwiZGF0ZVJhbmdlUGFuZWwuaGlkZSgpXCI+PC9idXR0b24+XG4gICAgPGJ1dHRvbiBwQnV0dG9uIHR5cGU9XCJidXR0b25cIiBbbGFiZWxdPVwiJ2FwcGx5J3wgdHJhbnNsYXRlXCIgY2xhc3M9XCJwLWJ1dHRvbi1wcmltYXJ5XCJcbiAgICAgIChjbGljayk9XCJhcHBseURhdGVSYW5nZSgpOyBkYXRlUmFuZ2VQYW5lbC5oaWRlKClcIj48L2J1dHRvbj5cbiAgPC9kaXY+XG48L3Atb3ZlcmxheVBhbmVsPlxuXG48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBwQnV0dG9uIChjbGljayk9XCJkYXRlUmFuZ2VQYW5lbC50b2dnbGUoJGV2ZW50KVwiIGNsYXNzPVwicC1idXR0b24tdGV4dCBidXR0b24tY3VzdG9tLWRhdGUtcmFuZ2VcIj5cbiAgPGRpdiBjbGFzcz1cImZsb2F0LWxhYmVsLWNvbnRhaW5lclwiPlxuICAgIDxsYWJlbCBjbGFzcz1cImZsb2F0LWxhYmVsXCI+e3tsYWJlbCB8fCAnRGF0ZSd9fTwvbGFiZWw+XG4gICAgPGkgY2xhc3M9XCJwaSBwaS1jaGV2cm9uLWRvd24gYXJyb3ctaWNvblwiIFtjbGFzcy5vcGVuXT1cImRhdGVSYW5nZVBhbmVsLm92ZXJsYXlWaXNpYmxlXCI+PC9pPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cInZhbHVlLXJhbmdlXCI+e3sgc2VsZWN0ZWREYXRlUmFuZ2UgfHwgJ1NlbGVjdCBEYXRlIFJhbmdlJyB9fTwvZGl2PlxuPC9idXR0b24+Il19