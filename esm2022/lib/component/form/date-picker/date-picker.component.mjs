import { Component, forwardRef, Input, Optional, } from '@angular/core';
import { FormsModule, NG_VALUE_ACCESSOR, ReactiveFormsModule } from '@angular/forms';
import { BaseControlValueAccessor } from '../base-control-value-accessor';
import { OverlayPanelModule } from 'primeng/overlaypanel';
import { CalendarModule } from 'primeng/calendar';
import { DropdownModule } from 'primeng/dropdown';
import { MaLibModule } from '../../../ma-lib.module';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "@ngx-translate/core";
import * as i4 from "primeng/calendar";
import * as i5 from "primeng/api";
import * as i6 from "primeng/dropdown";
export class DatePickerComponent extends BaseControlValueAccessor {
    constructor(controlContainer) {
        super(controlContainer);
        this.controlContainer = controlContainer;
        this.label = '';
        this.showTime = true;
        this.dateOption = 'daily';
        this.dateOptions = [
            { label: 'daily', value: 'daily' },
            { label: 'weekly', value: 'weekly' },
            { label: 'monthly', value: 'monthly' },
        ];
    }
    get formGroup() {
        return this.controlContainer?.control;
    }
    ngOnInit() {
        this.control.valueChanges.subscribe(() => {
            this.highlightWeek();
            if (this.control.value && this.control.value.length === 2) {
                const [fromDate, toDate] = this.control.value;
                const oneYearInMillis = 365 * 24 * 60 * 60 * 1000;
                if (toDate && (toDate.getTime() - fromDate.getTime() > oneYearInMillis)) {
                    const adjustedToDate = new Date(fromDate.getTime() + oneYearInMillis);
                    this.control.setValue([fromDate, adjustedToDate], { emitEvent: false });
                }
            }
        });
    }
    onTimeChange() {
        this.control.setValue(this.control.value);
    }
    onCalendarOpen() {
        if (this.control.value) {
            this.highlightWeek();
        }
    }
    highlightWeek() {
        if (this.dateOption !== 'weekly') {
            return;
        }
        setTimeout(() => {
            const cells = document.querySelectorAll('.date-picker tr');
            cells.forEach(cell => {
                const span = cell.querySelector('span.p-highlight');
                if (span) {
                    cell.classList.add('week-highlight');
                }
            });
        }, 50);
    }
    onChangeDateOption(event) {
        console.log(event);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DatePickerComponent, deps: [{ token: i1.ControlContainer, optional: true }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: DatePickerComponent, isStandalone: true, selector: "date-picker", inputs: { label: "label", maxDate: "maxDate", minDate: "minDate", showTime: "showTime" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => DatePickerComponent),
                multi: true,
            },
        ], usesInheritance: true, ngImport: i0, template: "<div class=\"combo-datepicker\">\n  <div class=\"p-inputgroup\">\n    <span class=\"p-inputgroup-addon\">\n      <p-dropdown [options]=\"dateOptions\" [(ngModel)]=\"dateOption\" [ngModelOptions]=\" \n             {standalone: true}\" (ngModelChange)=\"onChangeDateOption($event)\" [optionLabel]=\"'label'\"\n        [optionValue]=\"'value'\">\n        <ng-template let-selectedItem pTemplate=\"selectedItem\">\n          <span *ngIf=\"selectedItem\">\n            {{ selectedItem.label | translate}}\n          </span>\n          <span *ngIf=\"!selectedItem \">\n            {{ 'all' | translate }}\n          </span>\n        </ng-template>\n        <ng-template pTemplate=\"option\" let-option>{{option.label | translate}} </ng-template>\n      </p-dropdown>\n    </span>\n    <div class=\"date-picker date-picker-container \">\n      <div class=\"calendar-container\">\n        <p-calendar [formControl]=\"control\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" (onFocus)=\"onCalendarOpen()\"\n          [styleClass]=\"dateOption =='weekly'?'date-picker-week' : ''\" [view]=\"dateOption =='monthly'?'month': 'date'\"\n          [dateFormat]=\"dateOption =='monthly'?'mm/yy': 'dd/mm/yy'\" [showWeek]=\"dateOption =='weekly'\"\n          [placeholder]=\"'Select Date'\"></p-calendar>\n      </div>\n    </div>\n  </div>\n</div>", styles: [".date-picker-container{display:flex}.date-picker-container ::ng-deep .p-calendar .p-datepicker{width:unset!important}.date-picker-container ::ng-deep .p-datepicker.p-datepicker-multiple-month .p-datepicker-group{border-left:unset!important}.date-picker-container ::ng-deep .p-datepicker{border:unset}.date-picker-container ::ng-deep .p-datepicker td>span{margin:0}.date-picker-container ::ng-deep .p-datepicker table th{padding:2px}.date-picker-container ::ng-deep .p-datepicker table td>span{width:34px;height:32px;border-radius:4px}.date-picker-container ::ng-deep .p-datepicker table td{padding:2px 0}.date-picker-container ::ng-deep .p-datepicker table td span.p-highlight{border-radius:4px;background:#2e6be5!important;color:#fff!important}.date-picker-container ::ng-deep .p-datepicker table td.p-datepicker-today span{border-radius:4px;color:#2e6be5;background:#edf3ff}.date-picker-container ::ng-deep .p-datepicker table td span.p-highlight{color:#404040;background:#edf3ff}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-header{border-bottom:unset}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-header .p-datepicker-title .p-datepicker-month{margin-right:.5rem!important}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-prev,.date-picker-container ::ng-deep .p-datepicker .p-datepicker-next{border:1px solid #E6E6E6;border-radius:4px;height:32px;width:32px}.date-picker-container .time-intervals{flex:0 0 136px;border-right:1px solid #e6e6e6;padding-right:8px}.date-picker-container .time-intervals ul{list-style:none;padding:0;margin:0}.date-picker-container .time-intervals ul li{cursor:pointer;padding:14px 0;font-size:14px;color:#333;font-weight:400}.date-picker-container .time-intervals ul li:hover,.date-picker-container .time-intervals ul li.active{font-weight:600}.date-picker-container .calendar-container{flex:1}.date-range-actions{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem;border-top:1px solid #E6E6E6;padding-top:16px;align-items:center}.date-range-actions button{min-width:80px}.date-range-actions .date-range-value{color:#6c6c6c;padding-right:16px}.button-custom-date-range{padding:0;border:unset!important;box-shadow:unset!important;background:#fff!important;max-width:20vw;text-align:left;display:block}.value-range{color:#404040;font-weight:400;line-height:20px;padding-top:5px;font-size:14px;display:block}.p-inputgroup-addon{padding:unset;background-color:unset}::ng-deep .combo-datepicker{padding-right:16px}::ng-deep .combo-datepicker .p-datepicker-weekheader{padding-right:24px!important}::ng-deep .combo-datepicker .p-datepicker-weeknumber{padding-right:24px!important}::ng-deep .combo-datepicker .p-inputgroup .p-inputwrapper>.p-component{width:unset}::ng-deep .combo-datepicker .p-dropdown{border:unset;border-radius:unset;border-top-left-radius:6px;border-bottom-left-radius:6px}::ng-deep .combo-datepicker .p-dropdown-label{max-width:10vw}::ng-deep .combo-datepicker .p-inputgroup .p-inputtext{border-radius:0 6px 6px 0}::ng-deep .combo-datepicker .p-inputgroup .p-inputtext:has(+.p-inputgroup-addon .circle-x){border-right:unset}::ng-deep .combo-datepicker .p-inputgroup-addon{padding:unset;background-color:unset}::ng-deep .combo-datepicker .p-inputgroup-addon:has(.pi-search){padding-left:12px;min-width:unset}::ng-deep .combo-datepicker .p-inputgroup-addon:has(.circle-x){border-left:unset}::ng-deep .combo-datepicker .p-inputtext:enabled:focus{box-shadow:unset;border-color:#d1d5db;transition:0ms}::ng-deep .combo-datepicker .p-inputtext:enabled:hover{box-shadow:unset;border-color:#d1d5db;transition:0ms}::ng-deep .combo-datepicker .p-dropdown:not(.p-disabled).p-focus{box-shadow:unset;border-color:#d1d5db}::ng-deep .combo-datepicker .p-monthpicker .p-monthpicker-month{padding:10px}::ng-deep .combo-datepicker .p-monthpicker .p-monthpicker-month.p-highlight{background:#2e6be5!important;color:#fff!important}::ng-deep .date-picker-week .week-highlight td{background-color:#2e6be5!important;color:#fff!important;border-radius:0!important;transition:0s!important}::ng-deep .date-picker-week .week-highlight td:first-child{border-top-left-radius:4px!important;border-bottom-left-radius:4px!important}::ng-deep .date-picker-week .week-highlight td:last-child{border-top-right-radius:4px!important;border-bottom-right-radius:4px!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td{background-color:#f5f5f5!important;border-radius:0!important;transition:0s!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td:first-child{border-top-left-radius:4px!important;border-bottom-left-radius:4px!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td:last-child{border-top-right-radius:4px!important;border-bottom-right-radius:4px!important}::ng-deep .date-picker-week .p-datepicker:not(.p-disabled) table td span:not(.p-highlight):not(.p-disabled):hover{background-color:unset!important}::ng-deep .date-picker-week .p-datepicker table td span.p-highlight{background-color:unset!important}\n"], dependencies: [{ kind: "ngmodule", type: MaLibModule }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i3.TranslatePipe, name: "translate" }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "ngmodule", type: CalendarModule }, { kind: "component", type: i4.Calendar, selector: "p-calendar", inputs: ["style", "styleClass", "inputStyle", "inputId", "name", "inputStyleClass", "placeholder", "ariaLabelledBy", "iconAriaLabel", "disabled", "dateFormat", "multipleSeparator", "rangeSeparator", "inline", "showOtherMonths", "selectOtherMonths", "showIcon", "icon", "appendTo", "readonlyInput", "shortYearCutoff", "monthNavigator", "yearNavigator", "hourFormat", "timeOnly", "stepHour", "stepMinute", "stepSecond", "showSeconds", "required", "showOnFocus", "showWeek", "showClear", "dataType", "selectionMode", "maxDateCount", "showButtonBar", "todayButtonStyleClass", "clearButtonStyleClass", "autoZIndex", "baseZIndex", "panelStyleClass", "panelStyle", "keepInvalid", "hideOnDateTimeSelect", "touchUI", "timeSeparator", "focusTrap", "showTransitionOptions", "hideTransitionOptions", "tabindex", "minDate", "maxDate", "disabledDates", "disabledDays", "yearRange", "showTime", "responsiveOptions", "numberOfMonths", "firstDayOfWeek", "locale", "view", "defaultDate"], outputs: ["onFocus", "onBlur", "onClose", "onSelect", "onClear", "onInput", "onTodayClick", "onClearClick", "onMonthChange", "onYearChange", "onClickOutside", "onShow"] }, { kind: "directive", type: i5.PrimeTemplate, selector: "[pTemplate]", inputs: ["type", "pTemplate"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i1.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: OverlayPanelModule }, { kind: "ngmodule", type: DropdownModule }, { kind: "component", type: i6.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "selectId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "overlayDirection", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: DatePickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'date-picker', standalone: true, imports: [
                        MaLibModule,
                        ReactiveFormsModule,
                        CalendarModule,
                        FormsModule,
                        OverlayPanelModule,
                        DropdownModule
                    ], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => DatePickerComponent),
                            multi: true,
                        },
                    ], template: "<div class=\"combo-datepicker\">\n  <div class=\"p-inputgroup\">\n    <span class=\"p-inputgroup-addon\">\n      <p-dropdown [options]=\"dateOptions\" [(ngModel)]=\"dateOption\" [ngModelOptions]=\" \n             {standalone: true}\" (ngModelChange)=\"onChangeDateOption($event)\" [optionLabel]=\"'label'\"\n        [optionValue]=\"'value'\">\n        <ng-template let-selectedItem pTemplate=\"selectedItem\">\n          <span *ngIf=\"selectedItem\">\n            {{ selectedItem.label | translate}}\n          </span>\n          <span *ngIf=\"!selectedItem \">\n            {{ 'all' | translate }}\n          </span>\n        </ng-template>\n        <ng-template pTemplate=\"option\" let-option>{{option.label | translate}} </ng-template>\n      </p-dropdown>\n    </span>\n    <div class=\"date-picker date-picker-container \">\n      <div class=\"calendar-container\">\n        <p-calendar [formControl]=\"control\" [minDate]=\"minDate\" [maxDate]=\"maxDate\" (onFocus)=\"onCalendarOpen()\"\n          [styleClass]=\"dateOption =='weekly'?'date-picker-week' : ''\" [view]=\"dateOption =='monthly'?'month': 'date'\"\n          [dateFormat]=\"dateOption =='monthly'?'mm/yy': 'dd/mm/yy'\" [showWeek]=\"dateOption =='weekly'\"\n          [placeholder]=\"'Select Date'\"></p-calendar>\n      </div>\n    </div>\n  </div>\n</div>", styles: [".date-picker-container{display:flex}.date-picker-container ::ng-deep .p-calendar .p-datepicker{width:unset!important}.date-picker-container ::ng-deep .p-datepicker.p-datepicker-multiple-month .p-datepicker-group{border-left:unset!important}.date-picker-container ::ng-deep .p-datepicker{border:unset}.date-picker-container ::ng-deep .p-datepicker td>span{margin:0}.date-picker-container ::ng-deep .p-datepicker table th{padding:2px}.date-picker-container ::ng-deep .p-datepicker table td>span{width:34px;height:32px;border-radius:4px}.date-picker-container ::ng-deep .p-datepicker table td{padding:2px 0}.date-picker-container ::ng-deep .p-datepicker table td span.p-highlight{border-radius:4px;background:#2e6be5!important;color:#fff!important}.date-picker-container ::ng-deep .p-datepicker table td.p-datepicker-today span{border-radius:4px;color:#2e6be5;background:#edf3ff}.date-picker-container ::ng-deep .p-datepicker table td span.p-highlight{color:#404040;background:#edf3ff}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-header{border-bottom:unset}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-header .p-datepicker-title .p-datepicker-month{margin-right:.5rem!important}.date-picker-container ::ng-deep .p-datepicker .p-datepicker-prev,.date-picker-container ::ng-deep .p-datepicker .p-datepicker-next{border:1px solid #E6E6E6;border-radius:4px;height:32px;width:32px}.date-picker-container .time-intervals{flex:0 0 136px;border-right:1px solid #e6e6e6;padding-right:8px}.date-picker-container .time-intervals ul{list-style:none;padding:0;margin:0}.date-picker-container .time-intervals ul li{cursor:pointer;padding:14px 0;font-size:14px;color:#333;font-weight:400}.date-picker-container .time-intervals ul li:hover,.date-picker-container .time-intervals ul li.active{font-weight:600}.date-picker-container .calendar-container{flex:1}.date-range-actions{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem;border-top:1px solid #E6E6E6;padding-top:16px;align-items:center}.date-range-actions button{min-width:80px}.date-range-actions .date-range-value{color:#6c6c6c;padding-right:16px}.button-custom-date-range{padding:0;border:unset!important;box-shadow:unset!important;background:#fff!important;max-width:20vw;text-align:left;display:block}.value-range{color:#404040;font-weight:400;line-height:20px;padding-top:5px;font-size:14px;display:block}.p-inputgroup-addon{padding:unset;background-color:unset}::ng-deep .combo-datepicker{padding-right:16px}::ng-deep .combo-datepicker .p-datepicker-weekheader{padding-right:24px!important}::ng-deep .combo-datepicker .p-datepicker-weeknumber{padding-right:24px!important}::ng-deep .combo-datepicker .p-inputgroup .p-inputwrapper>.p-component{width:unset}::ng-deep .combo-datepicker .p-dropdown{border:unset;border-radius:unset;border-top-left-radius:6px;border-bottom-left-radius:6px}::ng-deep .combo-datepicker .p-dropdown-label{max-width:10vw}::ng-deep .combo-datepicker .p-inputgroup .p-inputtext{border-radius:0 6px 6px 0}::ng-deep .combo-datepicker .p-inputgroup .p-inputtext:has(+.p-inputgroup-addon .circle-x){border-right:unset}::ng-deep .combo-datepicker .p-inputgroup-addon{padding:unset;background-color:unset}::ng-deep .combo-datepicker .p-inputgroup-addon:has(.pi-search){padding-left:12px;min-width:unset}::ng-deep .combo-datepicker .p-inputgroup-addon:has(.circle-x){border-left:unset}::ng-deep .combo-datepicker .p-inputtext:enabled:focus{box-shadow:unset;border-color:#d1d5db;transition:0ms}::ng-deep .combo-datepicker .p-inputtext:enabled:hover{box-shadow:unset;border-color:#d1d5db;transition:0ms}::ng-deep .combo-datepicker .p-dropdown:not(.p-disabled).p-focus{box-shadow:unset;border-color:#d1d5db}::ng-deep .combo-datepicker .p-monthpicker .p-monthpicker-month{padding:10px}::ng-deep .combo-datepicker .p-monthpicker .p-monthpicker-month.p-highlight{background:#2e6be5!important;color:#fff!important}::ng-deep .date-picker-week .week-highlight td{background-color:#2e6be5!important;color:#fff!important;border-radius:0!important;transition:0s!important}::ng-deep .date-picker-week .week-highlight td:first-child{border-top-left-radius:4px!important;border-bottom-left-radius:4px!important}::ng-deep .date-picker-week .week-highlight td:last-child{border-top-right-radius:4px!important;border-bottom-right-radius:4px!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td{background-color:#f5f5f5!important;border-radius:0!important;transition:0s!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td:first-child{border-top-left-radius:4px!important;border-bottom-left-radius:4px!important}::ng-deep .date-picker-week tr:not(.week-highlight):hover td:last-child{border-top-right-radius:4px!important;border-bottom-right-radius:4px!important}::ng-deep .date-picker-week .p-datepicker:not(.p-disabled) table td span:not(.p-highlight):not(.p-disabled):hover{background-color:unset!important}::ng-deep .date-picker-week .p-datepicker table td span.p-highlight{background-color:unset!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ControlContainer, decorators: [{
                    type: Optional
                }] }]; }, propDecorators: { label: [{
                type: Input
            }], maxDate: [{
                type: Input
            }], minDate: [{
                type: Input
            }], showTime: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWEtbGliL3NyYy9saWIvY29tcG9uZW50L2Zvcm0vZGF0ZS1waWNrZXIvZGF0ZS1waWNrZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWEtbGliL3NyYy9saWIvY29tcG9uZW50L2Zvcm0vZGF0ZS1waWNrZXIvZGF0ZS1waWNrZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxVQUFVLEVBQ1YsS0FBSyxFQUVMLFFBQVEsR0FFVCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQStCLFdBQVcsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2xILE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQzFELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7Ozs7OztBQXVCckQsTUFBTSxPQUFPLG1CQUFvQixTQUFRLHdCQUF3QjtJQWEvRCxZQUF3QyxnQkFBa0M7UUFDeEUsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFEYyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBWmpFLFVBQUssR0FBVyxFQUFFLENBQUM7UUFJbkIsYUFBUSxHQUFZLElBQUksQ0FBQztRQUVsQyxlQUFVLEdBQUcsT0FBTyxDQUFDO1FBQ3JCLGdCQUFXLEdBQVE7WUFDakIsRUFBRSxLQUFLLEVBQUUsT0FB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QUksV0FDUDt3QkFDUCxXQUFXO3dCQUNYLG1CQUFtQjt3QkFDbkIsY0FBYzt3QkFDZCxXQUFXO3dCQUNYLGtCQUFrQjt3QkFDbEIsY0FBYztxQkFDZixhQUVVO3dCQUNUOzRCQUNFLE9BQU8sRUFBRSxpQkFBaUI7NEJBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsR0FBRyxFQUFFLG9CQUFvQixDQUFDOzRCQUNsRCxLQUFLLEVBQUUsSUFBSTt5QkFDWjtxQkFDRjs7MEJBZVksUUFBUTs0Q0FaWixLQUFLO3NCQUFiLEtBQUs7Z0JBRUcsT0FBTztzQkFBZixLQUFLO2dCQUNHLE9BQU87c0JBQWYsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBmb3J3YXJkUmVmLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPcHRpb25hbCxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xDb250YWluZXIsIEZvcm1Hcm91cCwgRm9ybXNNb2R1bGUsIE5HX1ZBTFVFX0FDQ0VTU09SLCBSZWFjdGl2ZUZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQmFzZUNvbnRyb2xWYWx1ZUFjY2Vzc29yIH0gZnJvbSAnLi4vYmFzZS1jb250cm9sLXZhbHVlLWFjY2Vzc29yJztcbmltcG9ydCB7IE92ZXJsYXlQYW5lbE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvb3ZlcmxheXBhbmVsJztcbmltcG9ydCB7IENhbGVuZGFyTW9kdWxlIH0gZnJvbSAncHJpbWVuZy9jYWxlbmRhcic7XG5pbXBvcnQgeyBEcm9wZG93bk1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvZHJvcGRvd24nO1xuaW1wb3J0IHsgTWFMaWJNb2R1bGUgfSBmcm9tICcuLi8uLi8uLi9tYS1saWIubW9kdWxlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZGF0ZS1waWNrZXInLFxuICB0ZW1wbGF0ZVVybDogJy4vZGF0ZS1waWNrZXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgTWFMaWJNb2R1bGUsXG4gICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICBDYWxlbmRhck1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBPdmVybGF5UGFuZWxNb2R1bGUsXG4gICAgRHJvcGRvd25Nb2R1bGVcbiAgXSxcbiAgc3R5bGVVcmxzOiBbJ2RhdGUtcGlja2VyLmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRGF0ZVBpY2tlckNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBEYXRlUGlja2VyQ29tcG9uZW50IGV4dGVuZHMgQmFzZUNvbnRyb2xWYWx1ZUFjY2Vzc29yIGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgbGFiZWw6IHN0cmluZyA9ICcnO1xuXG4gIEBJbnB1dCgpIG1heERhdGU6IERhdGU7XG4gIEBJbnB1dCgpIG1pbkRhdGU6IERhdGU7XG4gIEBJbnB1dCgpIHNob3dUaW1lOiBib29sZWFuID0gdHJ1ZTtcblxuICBkYXRlT3B0aW9uID0gJ2RhaWx5JztcbiAgZGF0ZU9wdGlvbnM6IGFueSA9IFtcbiAgICB7IGxhYmVsOiAnZGFpbHknLCB2YWx1ZTogJ2RhaWx5JyB9LFxuICAgIHsgbGFiZWw6ICd3ZWVrbHknLCB2YWx1ZTogJ3dlZWtseScgfSxcbiAgICB7IGxhYmVsOiAnbW9udGhseScsIHZhbHVlOiAnbW9udGhseScgfSxcbiAgXVxuICBjb25zdHJ1Y3RvcihAT3B0aW9uYWwoKSBwdWJsaWMgb3ZlcnJpZGUgY29udHJvbENvbnRhaW5lcjogQ29udHJvbENvbnRhaW5lcikge1xuICAgIHN1cGVyKGNvbnRyb2xDb250YWluZXIpO1xuICB9XG5cbiAgZ2V0IGZvcm1Hcm91cCgpOiBGb3JtR3JvdXAge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xDb250YWluZXI/LmNvbnRyb2wgYXMgRm9ybUdyb3VwO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5jb250cm9sLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5oaWdobGlnaHRXZWVrKCk7XG4gICAgICBpZiAodGhpcy5jb250cm9sLnZhbHVlICYmIHRoaXMuY29udHJvbC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgY29uc3QgW2Zyb21EYXRlLCB0b0RhdGVdID0gdGhpcy5jb250cm9sLnZhbHVlO1xuICAgICAgICBjb25zdCBvbmVZZWFySW5NaWxsaXMgPSAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICAgICAgICBpZiAodG9EYXRlICYmICh0b0RhdGUuZ2V0VGltZSgpIC0gZnJvbURhdGUuZ2V0VGltZSgpID4gb25lWWVhckluTWlsbGlzKSkge1xuICAgICAgICAgIGNvbnN0IGFkanVzdGVkVG9EYXRlID0gbmV3IERhdGUoZnJvbURhdGUuZ2V0VGltZSgpICsgb25lWWVhckluTWlsbGlzKTtcbiAgICAgICAgICB0aGlzLmNvbnRyb2wuc2V0VmFsdWUoW2Zyb21EYXRlLCBhZGp1c3RlZFRvRGF0ZV0sIHsgZW1pdEV2ZW50OiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIG9uVGltZUNoYW5nZSgpIHtcbiAgICB0aGlzLmNvbnRyb2wuc2V0VmFsdWUodGhpcy5jb250cm9sLnZhbHVlKTtcbiAgfVxuICBvbkNhbGVuZGFyT3BlbigpIHtcbiAgICBpZiAodGhpcy5jb250cm9sLnZhbHVlKSB7XG4gICAgICB0aGlzLmhpZ2hsaWdodFdlZWsoKTtcbiAgICB9XG4gIH1cbiAgaGlnaGxpZ2h0V2VlaygpIHtcbiAgICBpZiAodGhpcy5kYXRlT3B0aW9uICE9PSAnd2Vla2x5Jykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGUtcGlja2VyIHRyJyk7XG4gICAgICBjZWxscy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgICAgICBjb25zdCBzcGFuID0gY2VsbC5xdWVyeVNlbGVjdG9yKCdzcGFuLnAtaGlnaGxpZ2h0Jyk7XG4gICAgICAgIGlmIChzcGFuKSB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCd3ZWVrLWhpZ2hsaWdodCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCA1MCk7XG4gIH1cbiAgb25DaGFuZ2VEYXRlT3B0aW9uKGV2ZW50OiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhldmVudCk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJjb21iby1kYXRlcGlja2VyXCI+XG4gIDxkaXYgY2xhc3M9XCJwLWlucHV0Z3JvdXBcIj5cbiAgICA8c3BhbiBjbGFzcz1cInAtaW5wdXRncm91cC1hZGRvblwiPlxuICAgICAgPHAtZHJvcGRvd24gW29wdGlvbnNdPVwiZGF0ZU9wdGlvbnNcIiBbKG5nTW9kZWwpXT1cImRhdGVPcHRpb25cIiBbbmdNb2RlbE9wdGlvbnNdPVwiIFxuICAgICAgICAgICAgIHtzdGFuZGFsb25lOiB0cnVlfVwiIChuZ01vZGVsQ2hhbmdlKT1cIm9uQ2hhbmdlRGF0ZU9wdGlvbigkZXZlbnQpXCIgW29wdGlvbkxhYmVsXT1cIidsYWJlbCdcIlxuICAgICAgICBbb3B0aW9uVmFsdWVdPVwiJ3ZhbHVlJ1wiPlxuICAgICAgICA8bmctdGVtcGxhdGUgbGV0LXNlbGVjdGVkSXRlbSBwVGVtcGxhdGU9XCJzZWxlY3RlZEl0ZW1cIj5cbiAgICAgICAgICA8c3BhbiAqbmdJZj1cInNlbGVjdGVkSXRlbVwiPlxuICAgICAgICAgICAge3sgc2VsZWN0ZWRJdGVtLmxhYmVsIHwgdHJhbnNsYXRlfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPHNwYW4gKm5nSWY9XCIhc2VsZWN0ZWRJdGVtIFwiPlxuICAgICAgICAgICAge3sgJ2FsbCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBwVGVtcGxhdGU9XCJvcHRpb25cIiBsZXQtb3B0aW9uPnt7b3B0aW9uLmxhYmVsIHwgdHJhbnNsYXRlfX0gPC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvcC1kcm9wZG93bj5cbiAgICA8L3NwYW4+XG4gICAgPGRpdiBjbGFzcz1cImRhdGUtcGlja2VyIGRhdGUtcGlja2VyLWNvbnRhaW5lciBcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYWxlbmRhci1jb250YWluZXJcIj5cbiAgICAgICAgPHAtY2FsZW5kYXIgW2Zvcm1Db250cm9sXT1cImNvbnRyb2xcIiBbbWluRGF0ZV09XCJtaW5EYXRlXCIgW21heERhdGVdPVwibWF4RGF0ZVwiIChvbkZvY3VzKT1cIm9uQ2FsZW5kYXJPcGVuKClcIlxuICAgICAgICAgIFtzdHlsZUNsYXNzXT1cImRhdGVPcHRpb24gPT0nd2Vla2x5Jz8nZGF0ZS1waWNrZXItd2VlaycgOiAnJ1wiIFt2aWV3XT1cImRhdGVPcHRpb24gPT0nbW9udGhseSc/J21vbnRoJzogJ2RhdGUnXCJcbiAgICAgICAgICBbZGF0ZUZvcm1hdF09XCJkYXRlT3B0aW9uID09J21vbnRobHknPydtbS95eSc6ICdkZC9tbS95eSdcIiBbc2hvd1dlZWtdPVwiZGF0ZU9wdGlvbiA9PSd3ZWVrbHknXCJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ1NlbGVjdCBEYXRlJ1wiPjwvcC1jYWxlbmRhcj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PiJdfQ==