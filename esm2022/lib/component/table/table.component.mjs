import { CommonModule } from '@angular/common';
import { Component, ContentChild, EventEmitter, Input, Output } from '@angular/core';
import { ButtonModule } from 'primeng/button';
import { TableModule } from 'primeng/table';
import { PaginatorModule } from 'primeng/paginator';
import { DropdownModule } from 'primeng/dropdown';
import { FormsModule } from '@angular/forms';
import { debounceTime, Subject, takeUntil } from 'rxjs';
import { SkeletonModule } from 'primeng/skeleton';
import { TooltipModule } from 'primeng/tooltip';
import { MaLibModule } from '../../ma-lib.module';
import * as i0 from "@angular/core";
import * as i1 from "../../ma-lib.service";
import * as i2 from "primeng/table";
import * as i3 from "primeng/api";
import * as i4 from "@angular/forms";
import * as i5 from "primeng/tooltip";
import * as i6 from "primeng/dropdown";
import * as i7 from "primeng/paginator";
import * as i8 from "@angular/common";
import * as i9 from "@ngx-translate/core";
import * as i10 from "../../pipe/currency.pipe";
export class TableComponent {
    constructor(maService, cdr) {
        this.maService = maService;
        this.cdr = cdr;
        this.havePaginator = true;
        this.autoSearchAfterViewInit = true;
        this.selectionMode = 'single'; // null if checkbox
        this.scrollHeight = 'calc(100vh - 382px)';
        this.placeFooter = 'bottom';
        this.onRowSelected = new EventEmitter();
        this.onClickRow = new EventEmitter();
        this.selectViewDetailMode = false;
        this.offset = 0;
        this.limit = 20;
        this.currentPage = 0;
        this.totalRecords = 0;
        this.optionPaginators = [
            { label: '20', value: 20 },
            { label: '50', value: 50 },
            { label: '100', value: 100 },
            { label: '200', value: 200 }
        ];
        this.searchTrigger$ = new Subject();
        this.destroy$ = new Subject();
        this.isTriggeringSearch = false;
        this.isLoading = false;
        this.totalWidth = 0;
    }
    ngOnInit() {
        this.calculateColumnWidths();
        this.searchTrigger$.pipe(debounceTime(300), takeUntil(this.destroy$)).subscribe(() => {
            this.executeSearch();
        });
        if (this.autoSearchAfterViewInit) {
            this.triggerSearch();
        }
    }
    ngOnChanges(changes) {
        if (changes['cols']) {
            this.calculateColumnWidths();
        }
        if (changes['inputSearch'] && !changes['inputSearch'].firstChange) {
            this.offset = 0;
            this.triggerSearch();
        }
    }
    onPageChange(event) {
        if (event.rows !== this.limit) {
            this.limit = event.rows;
            this.currentPage = 0;
            this.offset = 0;
        }
        else {
            this.currentPage = event.page;
            this.offset = event.first;
        }
        this.triggerSearch();
    }
    onRowsChange() {
        this.offset = 0;
        this.currentPage = 0;
        this.triggerSearch();
    }
    triggerSearch() {
        if (this.isTriggeringSearch) {
            return;
        }
        this.isTriggeringSearch = true;
        this.searchTrigger$.next();
        setTimeout(() => {
            this.isTriggeringSearch = false;
        }, 200);
    }
    executeSearch() {
        if (this.isLoading) {
            return;
        }
        if (!this.autoSearchAfterViewInit && (!this.inputSearch || Object.keys(this.inputSearch).length === 0)) {
            return;
        }
        let inputSearch;
        if (this.inputSearch) {
            inputSearch = JSON.parse(JSON.stringify(this.inputSearch));
        }
        else {
            inputSearch = {};
        }
        const searchParams = { ...inputSearch, offset: this.offset, page: this.currentPage, size: this.limit };
        if (this.getList$) {
            this.datas = [];
            this.totalRecords = 0;
            const tableWrapper = document.querySelector('.p-datatable-wrapper');
            if (tableWrapper) {
                tableWrapper.scrollTo({ top: 0 });
            }
            this.isLoading = true;
            this.getList$(searchParams).subscribe({
                next: (result) => {
                    this.isLoading = false;
                    this.datas = result.items;
                    this.totalRecords = result.total;
                },
                error: (err) => {
                    this.isLoading = false;
                }
            });
        }
    }
    onRowSelect(event) {
        this.onRowSelected.emit(this.selectedRow);
        if (this.selectViewDetailMode) {
            this.cdr.detectChanges();
            this.selectedRow = null;
        }
    }
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    calculateColumnWidths() {
        let totalWidth = 0;
        this.cols.forEach(col => {
            if (!col.hidden) {
                if (!col.width) {
                    col.width = '100';
                }
                if (col.type === 'index' || col.type === 'checkbox') {
                    col.width = '60';
                }
                col.width = col.width.replace('px', '');
                const widthValue = parseInt(col.width.replace('px', ''), 10);
                totalWidth += widthValue;
            }
        });
        this.totalWidth = totalWidth;
        this.cols.forEach(col => {
            if (!col.hidden) {
                const widthValue = parseInt(col.width.replace('px', ''), 10);
                col.percentWidth = ((widthValue / totalWidth) * 100).toFixed(2) + '%';
            }
        });
    }
    checkWithSelectAll(event) {
        if (event.checked) {
            this.cdr.detectChanges();
            let col = this.cols.find(col => col.type === 'checkbox');
            this.selectedRow = this.selectedRow.filter((data) => {
                return ((!col?.format || (col.format in data && data[col.format] === true)));
            });
            this.onRowSelected.emit(this.selectedRow);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableComponent, deps: [{ token: i1.MaService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: TableComponent, isStandalone: true, selector: "app-table", inputs: { datas: "datas", havePaginator: "havePaginator", cols: "cols", autoSearchAfterViewInit: "autoSearchAfterViewInit", selectionMode: "selectionMode", inputSearch: "inputSearch", scrollHeight: "scrollHeight", getList$: "getList$", placeFooter: "placeFooter", selectViewDetailMode: "selectViewDetailMode", selectedRow: "selectedRow" }, outputs: { onRowSelected: "onRowSelected", onClickRow: "onClickRow" }, queries: [{ propertyName: "templateCellTemplate", first: true, predicate: ["templateCell"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"flex flex align-items-center justify-content-between\" *ngIf=\"havePaginator\">\n  <div class=\"flex gap-2 align-items-center\">\n    <span style=\"font-size: 12px; line-height: 16px;\"> {{'showingRecords' | translate: { first: totalRecords? (offset+1\n      | number):\n      0, last: (((offset + limit) < totalRecords ? (offset + limit) : totalRecords )| number), total : (totalRecords |\n        number) } }} </span>\n        <p-dropdown [options]=\"optionPaginators\" class=\"custom-select-paginator\" optionLabel=\"label\" optionValue=\"value\"\n          [(ngModel)]=\"limit\" (ngModelChange)=\"onRowsChange()\" />\n  </div>\n  <p-paginator [first]=\"offset\" class=\"custom-paginator\" [rows]=\"limit\" [totalRecords]=\"totalRecords\"\n    (onPageChange)=\"onPageChange($event)\" [showCurrentPageReport]=\"false\" currentPageReportTemplate=\"\"></p-paginator>\n</div>\n<p-table (onHeaderCheckboxToggle)=\"checkWithSelectAll($event)\" [selectionMode]=\"selectionMode\" class=\"dynamic-table\"\n  [(selection)]=\"selectedRow\" [scrollable]=\"true\" [scrollHeight]=\"scrollHeight\" [autoLayout]=\"false\"\n  (selectionChange)=\"onRowSelect($event)\" [columns]=\"cols\" [value]=\"datas\" [loading]=\"isLoading\">\n  <ng-template pTemplate=\"colgroup\" let-columns>\n    <colgroup>\n      <ng-container *ngFor=\"let col of columns\">\n        <col *ngIf=\"!col.hidden && !(col.type=='index' || col.type == 'checkbox')\" [style.min-width]=\"col.width +'px'\"\n          [style.width]=\"col.percentWidth\" />\n        <col *ngIf=\" col.type=='index' || col.type == 'checkbox'\" [style.width]=\"col.percentWidth\" />\n      </ng-container>\n    </colgroup>\n  </ng-template>\n  <ng-template pTemplate=\"header\" let-columns>\n    <tr class=\"table-header\">\n      <ng-container *ngFor=\"let col of columns\">\n        <th [style]=\"{'width': col.percentWidth,'min-width': col.width +'px'}\"\n          *ngIf=\"!col.hidden && col.type !=='checkbox'\">\n          <span class=\"one-line\" tooltipStyleClass=\"customtooltip\" [pTooltip]=\" (col.header | translate) || ''\"\n            [class.float-right]=\"col.type === 'number' || col.type==='currency'\" tooltipPosition=\"bottom\">\n            {{ col.header | translate}}</span>\n        </th>\n        <th *ngIf=\"!col.hidden && col.type === 'checkbox'\">\n          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\n        </th>\n      </ng-container>\n    </tr>\n    <ng-content *ngIf=\"placeFooter =='top'\" select=\"[footer]\"></ng-content>\n  </ng-template>\n  <ng-template pTemplate=\"body\" let-data let-i='rowIndex' let-columns=\"columns\">\n    <tr class=\"table-body\" [pSelectableRow]=\"data\">\n      <ng-container *ngFor=\"let col of columns\">\n        <td (click)=\"onClickRow.emit(data)\" [style]=\"{'width': col.percentWidth,'min-width': col.width +'px'}\" *ngIf=\"!col.hidden\">\n          <ng-container *ngIf=\"col.type == 'template'&& templateCellTemplate; else defaultCell\">\n            <ng-container\n              *ngTemplateOutlet=\"templateCellTemplate; context: { $implicit: data, column: col }\"></ng-container>\n          </ng-container>\n          <ng-template #defaultCell>\n            <ng-container *ngIf=\"col.type  == 'checkbox'  && (!col.format || data[col.format]=== true)\">\n              <p-tableCheckbox [value]=\"data\" (click)=\"$event.stopPropagation()\"></p-tableCheckbox>\n            </ng-container>\n\n            <ng-container *ngIf=\"col.type == 'index'\">\n              <span class=\"one-line \">\n                {{ offset + i + 1 }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"!col.type \">\n              <span class=\"one-line\" tooltipStyleClass=\"customtooltip\" [pTooltip]=\"data[col.field] || ''\"\n                tooltipPosition=\"bottom\">\n                {{ data[col.field] | translate }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'date'\">\n              <span class=\"one-line\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | date: (col.format || 'dd/MM/YYYY') ) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | date: (col.format || 'dd/MM/YYYY') }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'currency'\">\n              <span class=\"one-line float-right\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | customCurrency: (data[col.format]) ) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | customCurrency: (data[col.format]) }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'number'\">\n              <span class=\"one-line float-right\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | number: (col.format || '1.0-0')) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | number: (col.format || '1.0-0') }}\n              </span>\n            </ng-container>\n          </ng-template>\n        </td>\n      </ng-container>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate=\"loadingbody\" let-columns=\"columns\">\n    <div class=\"v-table-overlay\" *ngIf=\"isLoading\">\n      <div class=\"v-table-spinner v-table-loader\"></div>\n      <div class=\"v-table-text\">Please wait...</div>\n    </div>\n    <div *ngIf=\"isLoading\" [style]=\"{height: 'calc(-50px + '+scrollHeight +')'}\"></div>\n  </ng-template>\n  <ng-template *ngIf=\"placeFooter =='bottom'\" pTemplate=\"footer\">\n    <ng-content select=\"[footer]\"></ng-content>\n  </ng-template>\n  <ng-template pTemplate='emptymessage' let-columns>\n    <tr>\n      <td [style]=\"{height: 'calc(-50px + '+scrollHeight +')'}\" [attr.colspan]='1000'>\n        <ng-container [ngTemplateOutlet]=\"notDataTpl\"></ng-container>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>\n<ng-template #notDataTpl>\n  <div class=\"no-data-container\">\n    <img src=\"assets/images/no-data.png\" alt=\"No Data\" class=\"no-data-image\" />\n    <p class=\"no-data-message\">{{'noResultFound' | translate}}</p>\n    <p class=\"no-data-submessage\">{{'noResultFoundDesc' | translate}}</p>\n  </div>\n</ng-template>\n<!-- <app-config-display [cols]=\"cols\"></app-config-display> -->", styles: [".custom-select-paginator ::ng-deep .p-dropdown-label{padding:3px 0 3px 6px;font-size:12px;line-height:16px}.custom-select-paginator ::ng-deep .p-dropdown-trigger{width:1.5rem;padding:0 14px}::ng-deep .custom-paginator button{width:24px!important;min-width:24px!important;height:24px;border-radius:4px;font-size:12px;line-height:16px}::ng-deep .custom-paginator .p-paginator-element{margin:0 4px;border:1px solid #E6E6E6}::ng-deep .custom-paginator .p-paginator-page{margin:0 2px;border:unset}::ng-deep .custom-paginator .p-paginator-page:hover{background:#f5f5f5}::ng-deep .custom-paginator .p-highlight{background:#2e6be5!important;color:#fff!important}::ng-deep app-table{width:100%}::ng-deep .dynamic-table .p-datatable-wrapper{border:1px solid #E6E6E6}::ng-deep .dynamic-table .p-datatable-wrapper tr:has(.no-data-container){background:unset!important;color:unset!important}.no-data-container{text-align:center;padding:20px;color:#6c757d;max-width:78vw}.no-data-image{max-width:150px;margin-bottom:10px}.no-data-message{font-size:18px;font-weight:700}.no-data-submessage{font-size:14px}.float-right{float:right;text-align:right}.one-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;max-width:100%;width:-moz-fit-content;width:fit-content}::ng-deep .p-datatable-scrollable table{table-layout:fixed!important;width:100%!important}::ng-deep .dynamic-table .customtooltip .p-tooltip-text{background-color:#fff;color:#404040;width:max-content}::ng-deep .dynamic-table .customtooltip .p-tooltip-arrow{width:0;height:0;border-style:solid;position:absolute;border-width:0 6px 6px 6px;border-color:transparent transparent #fff transparent;top:-2px;left:30%;transform:translate(-50%);z-index:1}::ng-deep .dynamic-table .p-datatable-loading-overlay{background-color:#f0f0f080!important}::ng-deep .dynamic-table .p-datatable-loading-overlay .p-icon-wrapper{display:none!important}.table-header{height:28px;background:#f5f5f5}.table-header th{padding:6px 16px;font-size:12px;font-weight:500;color:#404040}.table-body td{padding:12px 16px;font-size:12px;font-weight:400;line-height:16px;color:#404040}.v-table-overlay{z-index:100;display:flex;gap:1rem;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:absolute;left:45%;top:40%}.v-table-loader{animation:rotate 1.5s infinite;height:50px;width:50px}.v-table-loader:before,.v-table-loader:after{border-radius:50%;content:\"\";display:block;height:20px;width:20px}.v-table-loader:before{animation:ball1 1s infinite;background-color:#1d559f;box-shadow:30px 0 #00b6eb;margin-bottom:10px}.v-table-loader:after{animation:ball2 1s infinite;background-color:#00b6eb;box-shadow:30px 0 #1d559f}@keyframes rotate{0%{transform:rotate(0) scale(.8)}50%{transform:rotate(360deg) scale(1.2)}to{transform:rotate(720deg) scale(.8)}}@keyframes ball1{0%{box-shadow:30px 0 #00b6eb}50%{box-shadow:0 0 #00b6eb;margin-bottom:0;transform:translate(15px,15px)}to{box-shadow:30px 0 #00b6eb;margin-bottom:10px}}@keyframes ball2{0%{box-shadow:30px 0 #1d559f}50%{box-shadow:0 0 #1d559f;margin-top:-20px;transform:translate(15px,15px)}to{box-shadow:30px 0 #1d559f;margin-top:0}}\n"], dependencies: [{ kind: "ngmodule", type: TableModule }, { kind: "component", type: i2.Table, selector: "p-table", inputs: ["frozenColumns", "frozenValue", "style", "styleClass", "tableStyle", "tableStyleClass", "paginator", "pageLinks", "rowsPerPageOptions", "alwaysShowPaginator", "paginatorPosition", "paginatorDropdownAppendTo", "paginatorDropdownScrollHeight", "currentPageReportTemplate", "showCurrentPageReport", "showJumpToPageDropdown", "showJumpToPageInput", "showFirstLastIcon", "showPageLinks", "defaultSortOrder", "sortMode", "resetPageOnSort", "selectionMode", "selectionPageOnly", "contextMenuSelection", "contextMenuSelectionMode", "dataKey", "metaKeySelection", "rowSelectable", "rowTrackBy", "lazy", "lazyLoadOnInit", "compareSelectionBy", "csvSeparator", "exportFilename", "filters", "globalFilterFields", "filterDelay", "filterLocale", "expandedRowKeys", "editingRowKeys", "rowExpandMode", "scrollable", "scrollDirection", "rowGroupMode", "scrollHeight", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "virtualScrollDelay", "frozenWidth", "responsive", "contextMenu", "resizableColumns", "columnResizeMode", "reorderableColumns", "loading", "loadingIcon", "showLoader", "rowHover", "customSort", "showInitialSortBadge", "autoLayout", "exportFunction", "exportHeader", "stateKey", "stateStorage", "editMode", "groupRowsBy", "groupRowsByOrder", "responsiveLayout", "breakpoint", "value", "columns", "first", "rows", "totalRecords", "sortField", "sortOrder", "multiSortMeta", "selection", "selectAll", "virtualRowHeight"], outputs: ["contextMenuSelectionChange", "selectAllChange", "selectionChange", "onRowSelect", "onRowUnselect", "onPage", "onSort", "onFilter", "onLazyLoad", "onRowExpand", "onRowCollapse", "onContextMenuSelect", "onColResize", "onColReorder", "onRowReorder", "onEditInit", "onEditComplete", "onEditCancel", "onHeaderCheckboxToggle", "sortFunction", "firstChange", "rowsChange", "onStateSave", "onStateRestore"] }, { kind: "directive", type: i3.PrimeTemplate, selector: "[pTemplate]", inputs: ["type", "pTemplate"] }, { kind: "directive", type: i2.SelectableRow, selector: "[pSelectableRow]", inputs: ["pSelectableRow", "pSelectableRowIndex", "pSelectableRowDisabled"] }, { kind: "component", type: i2.TableCheckbox, selector: "p-tableCheckbox", inputs: ["disabled", "value", "index", "inputId", "name", "required", "ariaLabel"] }, { kind: "component", type: i2.TableHeaderCheckbox, selector: "p-tableHeaderCheckbox", inputs: ["disabled", "inputId", "name", "ariaLabel"] }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: TooltipModule }, { kind: "directive", type: i5.Tooltip, selector: "[pTooltip]", inputs: ["tooltipPosition", "tooltipEvent", "appendTo", "positionStyle", "tooltipStyleClass", "tooltipZIndex", "escape", "showDelay", "hideDelay", "life", "positionTop", "positionLeft", "autoHide", "fitContent", "hideOnEscape", "pTooltip", "tooltipDisabled", "tooltipOptions"] }, { kind: "ngmodule", type: SkeletonModule }, { kind: "ngmodule", type: DropdownModule }, { kind: "component", type: i6.Dropdown, selector: "p-dropdown", inputs: ["scrollHeight", "filter", "name", "style", "panelStyle", "styleClass", "panelStyleClass", "readonly", "required", "editable", "appendTo", "tabindex", "placeholder", "filterPlaceholder", "filterLocale", "inputId", "selectId", "dataKey", "filterBy", "autofocus", "resetFilterOnHide", "dropdownIcon", "optionLabel", "optionValue", "optionDisabled", "optionGroupLabel", "optionGroupChildren", "autoDisplayFirst", "group", "showClear", "emptyFilterMessage", "emptyMessage", "lazy", "virtualScroll", "virtualScrollItemSize", "virtualScrollOptions", "overlayOptions", "ariaFilterLabel", "ariaLabel", "ariaLabelledBy", "filterMatchMode", "maxlength", "tooltip", "tooltipPosition", "tooltipPositionStyle", "tooltipStyleClass", "autofocusFilter", "overlayDirection", "disabled", "itemSize", "autoZIndex", "baseZIndex", "showTransitionOptions", "hideTransitionOptions", "filterValue", "options"], outputs: ["onChange", "onFilter", "onFocus", "onBlur", "onClick", "onShow", "onHide", "onClear", "onLazyLoad"] }, { kind: "ngmodule", type: ButtonModule }, { kind: "ngmodule", type: PaginatorModule }, { kind: "component", type: i7.Paginator, selector: "p-paginator", inputs: ["pageLinkSize", "style", "styleClass", "alwaysShow", "dropdownAppendTo", "templateLeft", "templateRight", "appendTo", "dropdownScrollHeight", "currentPageReportTemplate", "showCurrentPageReport", "showFirstLastIcon", "totalRecords", "rows", "rowsPerPageOptions", "showJumpToPageDropdown", "showJumpToPageInput", "showPageLinks", "dropdownItemTemplate", "first"], outputs: ["onPageChange"] }, { kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i8.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i8.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "pipe", type: i8.DecimalPipe, name: "number" }, { kind: "pipe", type: i8.DatePipe, name: "date" }, { kind: "ngmodule", type: MaLibModule }, { kind: "pipe", type: i9.TranslatePipe, name: "translate" }, { kind: "pipe", type: i10.CurrencyPipe, name: "customCurrency" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: TableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-table', standalone: true, imports: [TableModule, FormsModule, TooltipModule, SkeletonModule, DropdownModule, ButtonModule, PaginatorModule, CommonModule, MaLibModule], template: "<div class=\"flex flex align-items-center justify-content-between\" *ngIf=\"havePaginator\">\n  <div class=\"flex gap-2 align-items-center\">\n    <span style=\"font-size: 12px; line-height: 16px;\"> {{'showingRecords' | translate: { first: totalRecords? (offset+1\n      | number):\n      0, last: (((offset + limit) < totalRecords ? (offset + limit) : totalRecords )| number), total : (totalRecords |\n        number) } }} </span>\n        <p-dropdown [options]=\"optionPaginators\" class=\"custom-select-paginator\" optionLabel=\"label\" optionValue=\"value\"\n          [(ngModel)]=\"limit\" (ngModelChange)=\"onRowsChange()\" />\n  </div>\n  <p-paginator [first]=\"offset\" class=\"custom-paginator\" [rows]=\"limit\" [totalRecords]=\"totalRecords\"\n    (onPageChange)=\"onPageChange($event)\" [showCurrentPageReport]=\"false\" currentPageReportTemplate=\"\"></p-paginator>\n</div>\n<p-table (onHeaderCheckboxToggle)=\"checkWithSelectAll($event)\" [selectionMode]=\"selectionMode\" class=\"dynamic-table\"\n  [(selection)]=\"selectedRow\" [scrollable]=\"true\" [scrollHeight]=\"scrollHeight\" [autoLayout]=\"false\"\n  (selectionChange)=\"onRowSelect($event)\" [columns]=\"cols\" [value]=\"datas\" [loading]=\"isLoading\">\n  <ng-template pTemplate=\"colgroup\" let-columns>\n    <colgroup>\n      <ng-container *ngFor=\"let col of columns\">\n        <col *ngIf=\"!col.hidden && !(col.type=='index' || col.type == 'checkbox')\" [style.min-width]=\"col.width +'px'\"\n          [style.width]=\"col.percentWidth\" />\n        <col *ngIf=\" col.type=='index' || col.type == 'checkbox'\" [style.width]=\"col.percentWidth\" />\n      </ng-container>\n    </colgroup>\n  </ng-template>\n  <ng-template pTemplate=\"header\" let-columns>\n    <tr class=\"table-header\">\n      <ng-container *ngFor=\"let col of columns\">\n        <th [style]=\"{'width': col.percentWidth,'min-width': col.width +'px'}\"\n          *ngIf=\"!col.hidden && col.type !=='checkbox'\">\n          <span class=\"one-line\" tooltipStyleClass=\"customtooltip\" [pTooltip]=\" (col.header | translate) || ''\"\n            [class.float-right]=\"col.type === 'number' || col.type==='currency'\" tooltipPosition=\"bottom\">\n            {{ col.header | translate}}</span>\n        </th>\n        <th *ngIf=\"!col.hidden && col.type === 'checkbox'\">\n          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\n        </th>\n      </ng-container>\n    </tr>\n    <ng-content *ngIf=\"placeFooter =='top'\" select=\"[footer]\"></ng-content>\n  </ng-template>\n  <ng-template pTemplate=\"body\" let-data let-i='rowIndex' let-columns=\"columns\">\n    <tr class=\"table-body\" [pSelectableRow]=\"data\">\n      <ng-container *ngFor=\"let col of columns\">\n        <td (click)=\"onClickRow.emit(data)\" [style]=\"{'width': col.percentWidth,'min-width': col.width +'px'}\" *ngIf=\"!col.hidden\">\n          <ng-container *ngIf=\"col.type == 'template'&& templateCellTemplate; else defaultCell\">\n            <ng-container\n              *ngTemplateOutlet=\"templateCellTemplate; context: { $implicit: data, column: col }\"></ng-container>\n          </ng-container>\n          <ng-template #defaultCell>\n            <ng-container *ngIf=\"col.type  == 'checkbox'  && (!col.format || data[col.format]=== true)\">\n              <p-tableCheckbox [value]=\"data\" (click)=\"$event.stopPropagation()\"></p-tableCheckbox>\n            </ng-container>\n\n            <ng-container *ngIf=\"col.type == 'index'\">\n              <span class=\"one-line \">\n                {{ offset + i + 1 }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"!col.type \">\n              <span class=\"one-line\" tooltipStyleClass=\"customtooltip\" [pTooltip]=\"data[col.field] || ''\"\n                tooltipPosition=\"bottom\">\n                {{ data[col.field] | translate }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'date'\">\n              <span class=\"one-line\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | date: (col.format || 'dd/MM/YYYY') ) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | date: (col.format || 'dd/MM/YYYY') }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'currency'\">\n              <span class=\"one-line float-right\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | customCurrency: (data[col.format]) ) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | customCurrency: (data[col.format]) }}\n              </span>\n            </ng-container>\n            <ng-container *ngIf=\"col.type == 'number'\">\n              <span class=\"one-line float-right\" tooltipStyleClass=\"customtooltip\"\n                [pTooltip]=\"(data[col.field] | number: (col.format || '1.0-0')) || ''\" tooltipPosition=\"bottom\">\n                {{ data[col.field] | number: (col.format || '1.0-0') }}\n              </span>\n            </ng-container>\n          </ng-template>\n        </td>\n      </ng-container>\n    </tr>\n  </ng-template>\n  <ng-template pTemplate=\"loadingbody\" let-columns=\"columns\">\n    <div class=\"v-table-overlay\" *ngIf=\"isLoading\">\n      <div class=\"v-table-spinner v-table-loader\"></div>\n      <div class=\"v-table-text\">Please wait...</div>\n    </div>\n    <div *ngIf=\"isLoading\" [style]=\"{height: 'calc(-50px + '+scrollHeight +')'}\"></div>\n  </ng-template>\n  <ng-template *ngIf=\"placeFooter =='bottom'\" pTemplate=\"footer\">\n    <ng-content select=\"[footer]\"></ng-content>\n  </ng-template>\n  <ng-template pTemplate='emptymessage' let-columns>\n    <tr>\n      <td [style]=\"{height: 'calc(-50px + '+scrollHeight +')'}\" [attr.colspan]='1000'>\n        <ng-container [ngTemplateOutlet]=\"notDataTpl\"></ng-container>\n      </td>\n    </tr>\n  </ng-template>\n</p-table>\n<ng-template #notDataTpl>\n  <div class=\"no-data-container\">\n    <img src=\"assets/images/no-data.png\" alt=\"No Data\" class=\"no-data-image\" />\n    <p class=\"no-data-message\">{{'noResultFound' | translate}}</p>\n    <p class=\"no-data-submessage\">{{'noResultFoundDesc' | translate}}</p>\n  </div>\n</ng-template>\n<!-- <app-config-display [cols]=\"cols\"></app-config-display> -->", styles: [".custom-select-paginator ::ng-deep .p-dropdown-label{padding:3px 0 3px 6px;font-size:12px;line-height:16px}.custom-select-paginator ::ng-deep .p-dropdown-trigger{width:1.5rem;padding:0 14px}::ng-deep .custom-paginator button{width:24px!important;min-width:24px!important;height:24px;border-radius:4px;font-size:12px;line-height:16px}::ng-deep .custom-paginator .p-paginator-element{margin:0 4px;border:1px solid #E6E6E6}::ng-deep .custom-paginator .p-paginator-page{margin:0 2px;border:unset}::ng-deep .custom-paginator .p-paginator-page:hover{background:#f5f5f5}::ng-deep .custom-paginator .p-highlight{background:#2e6be5!important;color:#fff!important}::ng-deep app-table{width:100%}::ng-deep .dynamic-table .p-datatable-wrapper{border:1px solid #E6E6E6}::ng-deep .dynamic-table .p-datatable-wrapper tr:has(.no-data-container){background:unset!important;color:unset!important}.no-data-container{text-align:center;padding:20px;color:#6c757d;max-width:78vw}.no-data-image{max-width:150px;margin-bottom:10px}.no-data-message{font-size:18px;font-weight:700}.no-data-submessage{font-size:14px}.float-right{float:right;text-align:right}.one-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;max-width:100%;width:-moz-fit-content;width:fit-content}::ng-deep .p-datatable-scrollable table{table-layout:fixed!important;width:100%!important}::ng-deep .dynamic-table .customtooltip .p-tooltip-text{background-color:#fff;color:#404040;width:max-content}::ng-deep .dynamic-table .customtooltip .p-tooltip-arrow{width:0;height:0;border-style:solid;position:absolute;border-width:0 6px 6px 6px;border-color:transparent transparent #fff transparent;top:-2px;left:30%;transform:translate(-50%);z-index:1}::ng-deep .dynamic-table .p-datatable-loading-overlay{background-color:#f0f0f080!important}::ng-deep .dynamic-table .p-datatable-loading-overlay .p-icon-wrapper{display:none!important}.table-header{height:28px;background:#f5f5f5}.table-header th{padding:6px 16px;font-size:12px;font-weight:500;color:#404040}.table-body td{padding:12px 16px;font-size:12px;font-weight:400;line-height:16px;color:#404040}.v-table-overlay{z-index:100;display:flex;gap:1rem;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:absolute;left:45%;top:40%}.v-table-loader{animation:rotate 1.5s infinite;height:50px;width:50px}.v-table-loader:before,.v-table-loader:after{border-radius:50%;content:\"\";display:block;height:20px;width:20px}.v-table-loader:before{animation:ball1 1s infinite;background-color:#1d559f;box-shadow:30px 0 #00b6eb;margin-bottom:10px}.v-table-loader:after{animation:ball2 1s infinite;background-color:#00b6eb;box-shadow:30px 0 #1d559f}@keyframes rotate{0%{transform:rotate(0) scale(.8)}50%{transform:rotate(360deg) scale(1.2)}to{transform:rotate(720deg) scale(.8)}}@keyframes ball1{0%{box-shadow:30px 0 #00b6eb}50%{box-shadow:0 0 #00b6eb;margin-bottom:0;transform:translate(15px,15px)}to{box-shadow:30px 0 #00b6eb;margin-bottom:10px}}@keyframes ball2{0%{box-shadow:30px 0 #1d559f}50%{box-shadow:0 0 #1d559f;margin-top:-20px;transform:translate(15px,15px)}to{box-shadow:30px 0 #1d559f;margin-top:0}}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.MaService }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { datas: [{
                type: Input
            }], havePaginator: [{
                type: Input
            }], cols: [{
                type: Input
            }], autoSearchAfterViewInit: [{
                type: Input
            }], selectionMode: [{
                type: Input
            }], inputSearch: [{
                type: Input
            }], scrollHeight: [{
                type: Input
            }], getList$: [{
                type: Input
            }], placeFooter: [{
                type: Input
            }], onRowSelected: [{
                type: Output
            }], onClickRow: [{
                type: Output
            }], selectViewDetailMode: [{
                type: Input
            }], selectedRow: [{
                type: Input
            }], templateCellTemplate: [{
                type: ContentChild,
                args: ['templateCell', { static: false }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWEtbGliL3NyYy9saWIvY29tcG9uZW50L3RhYmxlL3RhYmxlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21hLWxpYi9zcmMvbGliL2NvbXBvbmVudC90YWJsZS90YWJsZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFxQixTQUFTLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQWEsTUFBTSxFQUE4QixNQUFNLGVBQWUsQ0FBQztBQUMvSSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM1QyxPQUFPLEVBQUUsZUFBZSxFQUFrQixNQUFNLG1CQUFtQixDQUFDO0FBQ3BFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFlBQVksRUFBYyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRXBFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFaEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7QUFTbEQsTUFBTSxPQUFPLGNBQWM7SUFrQ3pCLFlBQ1UsU0FBb0IsRUFDcEIsR0FBc0I7UUFEdEIsY0FBUyxHQUFULFNBQVMsQ0FBVztRQUNwQixRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQWxDdkIsa0JBQWEsR0FBRyxJQUFJLENBQUM7UUFFckIsNEJBQXVCLEdBQUcsSUFBSSxDQUFDO1FBQy9CLGtCQUFhLEdBQWlDLFFBQVEsQ0FBQyxDQUFDLG1CQUFtQjtRQUUzRSxpQkFBWSxHQUFHLHFCQUFxQixDQUFDO1FBRXJDLGdCQUFXLEdBQXFCLFFBQVEsQ0FBQztRQUN4QyxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDeEMsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFdEMseUJBQW9CLEdBQVksS0FBSyxDQUFDO1FBRy9DLFdBQU0sR0FBVyxDQUFDLENBQUM7UUFDbkIsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQUNuQixnQkFBVyxHQUFXLENBQUMsQ0FBQztRQUN4QixpQkFBWSxHQUFXLENBQUMsQ0FBQztRQUN6QixxQkFBZ0IsR0FBRztZQUNqQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRTtZQUMxQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRTtZQUMxQixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtZQUM1QixFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRTtTQUM3QixDQUFDO1FBRU0sbUJBQWMsR0FBRyxJQUFJLE9BQU8sRUFBUSxDQUFDO1FBQ3JDLGFBQVEsR0FBRyxJQUFJLE9BQU8sRUFBUSxDQUFDO1FBQy9CLHVCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNuQyxjQUFTLEdBQVksS0FBSyxDQUFDO1FBQzNCLGVBQVUsR0FBVyxDQUFDLENBQUM7SUFNbkIsQ0FBQztJQUVMLFFBQVE7UUFDTixJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztRQUU3QixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FDdEIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxFQUNqQixTQUFTLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUN6QixDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDZixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLElBQUksQ0FBQyx1QkFBdUIsRUFBRTtZQUNoQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7U0FDdEI7SUFDSCxDQUFDO0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQ2hDLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1NBQzlCO1FBQ0QsSUFBSSxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxFQUFFO1lBQ2pFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBQ2hCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFRCxZQUFZLENBQUMsS0FBcUI7UUFDaEMsSUFBSSxLQUFLLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1NBQ2pCO2FBQU07WUFDTCxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDOUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO1NBQzNCO1FBQ0QsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxZQUFZO1FBQ1YsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDaEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFTyxhQUFhO1FBQ25CLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO1lBQzNCLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUUzQixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNsQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDVixDQUFDO0lBRU8sYUFBYTtRQUNuQixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDbEIsT0FBTztTQUNSO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDdEcsT0FBTztTQUNSO1FBQ0QsSUFBSSxXQUFXLENBQUE7UUFDZixJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDcEIsV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztTQUM1RDthQUFNO1lBQ0wsV0FBVyxHQUFHLEVBQUUsQ0FBQztTQUNsQjtRQUNELE1BQU0sWUFBWSxHQUFHLEVBQUUsR0FBRyxXQUFXLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUV2RyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7WUFDaEIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7WUFDdEIsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBQ3BFLElBQUksWUFBWSxFQUFFO2dCQUNoQixZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDbkM7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUN0QixJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLFNBQVMsQ0FBQztnQkFDcEMsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUU7b0JBQ2YsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7b0JBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztvQkFDMUIsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO2dCQUNuQyxDQUFDO2dCQUNELEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFO29CQUNiLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUN6QixDQUFDO2FBQ0YsQ0FBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDO0lBRUQsV0FBVyxDQUFDLEtBQVU7UUFDcEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzFDLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFO1lBQzdCLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDekI7SUFDSCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQscUJBQXFCO1FBQ25CLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztRQUVuQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDZixJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRTtvQkFDZCxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztpQkFDbkI7Z0JBQ0QsSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtvQkFDbkQsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7aUJBQ2xCO2dCQUNELEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUN4QyxNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUM3RCxVQUFVLElBQUksVUFBVSxDQUFDO2FBQzFCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUN0QixJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRTtnQkFDZixNQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUM3RCxHQUFHLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQzthQUN2RTtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELGtCQUFrQixDQUFDLEtBQVU7UUFDM0IsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDekIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQyxDQUFDO1lBQ3pELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRTtnQkFDdkQsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDOUUsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7U0FFM0M7SUFDSCxDQUFDOytHQXBMVSxjQUFjO21HQUFkLGNBQWMsdW1CQ3JCM0IscXRNQWdIZ0UsOG9HRC9GcEQsV0FBVyx3OEVBQUUsV0FBVyw4VkFBRSxhQUFhLHFYQUFFLGNBQWMsOEJBQUUsY0FBYywra0NBQUUsWUFBWSw4QkFBRSxlQUFlLGlmQUFFLFlBQVksaWhCQUFFLFdBQVc7OzRGQUloSSxjQUFjO2tCQVAxQixTQUFTOytCQUNFLFdBQVcsY0FDVCxJQUFJLFdBQ1AsQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLFdBQVcsQ0FBQztnSUFLbkksS0FBSztzQkFBYixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLHVCQUF1QjtzQkFBL0IsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBQ0ksYUFBYTtzQkFBdEIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNO2dCQUVFLG9CQUFvQjtzQkFBNUIsS0FBSztnQkFFRyxXQUFXO3NCQUFuQixLQUFLO2dCQWlCMkMsb0JBQW9CO3NCQUFwRSxZQUFZO3VCQUFDLGNBQWMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgQ29udGVudENoaWxkLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkRlc3Ryb3ksIE91dHB1dCwgU2ltcGxlQ2hhbmdlcywgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJ1dHRvbk1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvYnV0dG9uJztcbmltcG9ydCB7IFRhYmxlTW9kdWxlIH0gZnJvbSAncHJpbWVuZy90YWJsZSc7XG5pbXBvcnQgeyBQYWdpbmF0b3JNb2R1bGUsIFBhZ2luYXRvclN0YXRlIH0gZnJvbSAncHJpbWVuZy9wYWdpbmF0b3InO1xuaW1wb3J0IHsgRHJvcGRvd25Nb2R1bGUgfSBmcm9tICdwcmltZW5nL2Ryb3Bkb3duJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBPYnNlcnZhYmxlLCBTdWJqZWN0LCB0YWtlVW50aWwgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbHVtbiwgSVNlYXJjaExpc3RJbnB1dCwgSVNlYXJjaExpc3RPdXRwdXQgfSBmcm9tICcuL3RhYmxlLmludGVyZmFjZSc7XG5pbXBvcnQgeyBTa2VsZXRvbk1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvc2tlbGV0b24nO1xuaW1wb3J0IHsgVG9vbHRpcE1vZHVsZSB9IGZyb20gJ3ByaW1lbmcvdG9vbHRpcCc7XG5pbXBvcnQgeyBNYVNlcnZpY2UgfSBmcm9tICcuLi8uLi9tYS1saWIuc2VydmljZSc7XG5pbXBvcnQgeyBNYUxpYk1vZHVsZSB9IGZyb20gJy4uLy4uL21hLWxpYi5tb2R1bGUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtdGFibGUnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbVGFibGVNb2R1bGUsIEZvcm1zTW9kdWxlLCBUb29sdGlwTW9kdWxlLCBTa2VsZXRvbk1vZHVsZSwgRHJvcGRvd25Nb2R1bGUsIEJ1dHRvbk1vZHVsZSwgUGFnaW5hdG9yTW9kdWxlLCBDb21tb25Nb2R1bGUsIE1hTGliTW9kdWxlXSxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhYmxlLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdGFibGUuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBUYWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIGRhdGFzITogYW55W107XG4gIEBJbnB1dCgpIGhhdmVQYWdpbmF0b3IgPSB0cnVlO1xuICBASW5wdXQoKSBjb2xzITogQ29sdW1uW107XG4gIEBJbnB1dCgpIGF1dG9TZWFyY2hBZnRlclZpZXdJbml0ID0gdHJ1ZTtcbiAgQElucHV0KCkgc2VsZWN0aW9uTW9kZTogJ3NpbmdsZScgfCAnbXVsdGlwbGUnIHwgbnVsbCA9ICdzaW5nbGUnOyAvLyBudWxsIGlmIGNoZWNrYm94XG4gIEBJbnB1dCgpIGlucHV0U2VhcmNoOiBhbnk7XG4gIEBJbnB1dCgpIHNjcm9sbEhlaWdodCA9ICdjYWxjKDEwMHZoIC0gMzgycHgpJztcbiAgQElucHV0KCkgZ2V0TGlzdCQ6IChpbnB1dDogSVNlYXJjaExpc3RJbnB1dCkgPT4gT2JzZXJ2YWJsZTxhbnk+O1xuICBASW5wdXQoKSBwbGFjZUZvb3RlcjogJ2JvdHRvbScgfCAndG9wJyA9ICdib3R0b20nO1xuICBAT3V0cHV0KCkgb25Sb3dTZWxlY3RlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgb25DbGlja1JvdyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBJbnB1dCgpIHNlbGVjdFZpZXdEZXRhaWxNb2RlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgQElucHV0KCkgc2VsZWN0ZWRSb3c6IGFueTtcbiAgb2Zmc2V0OiBudW1iZXIgPSAwO1xuICBsaW1pdDogbnVtYmVyID0gMjA7XG4gIGN1cnJlbnRQYWdlOiBudW1iZXIgPSAwO1xuICB0b3RhbFJlY29yZHM6IG51bWJlciA9IDA7XG4gIG9wdGlvblBhZ2luYXRvcnMgPSBbXG4gICAgeyBsYWJlbDogJzIwJywgdmFsdWU6IDIwIH0sXG4gICAgeyBsYWJlbDogJzUwJywgdmFsdWU6IDUwIH0sXG4gICAgeyBsYWJlbDogJzEwMCcsIHZhbHVlOiAxMDAgfSxcbiAgICB7IGxhYmVsOiAnMjAwJywgdmFsdWU6IDIwMCB9XG4gIF07XG5cbiAgcHJpdmF0ZSBzZWFyY2hUcmlnZ2VyJCA9IG5ldyBTdWJqZWN0PHZvaWQ+KCk7XG4gIHByaXZhdGUgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuICBwcml2YXRlIGlzVHJpZ2dlcmluZ1NlYXJjaCA9IGZhbHNlO1xuICBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgdG90YWxXaWR0aDogbnVtYmVyID0gMDtcbiAgQENvbnRlbnRDaGlsZCgndGVtcGxhdGVDZWxsJywgeyBzdGF0aWM6IGZhbHNlIH0pIHRlbXBsYXRlQ2VsbFRlbXBsYXRlITogVGVtcGxhdGVSZWY8YW55PjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1hU2VydmljZTogTWFTZXJ2aWNlLFxuICAgIHByaXZhdGUgY2RyOiBDaGFuZ2VEZXRlY3RvclJlZlxuICApIHsgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY2FsY3VsYXRlQ29sdW1uV2lkdGhzKCk7XG5cbiAgICB0aGlzLnNlYXJjaFRyaWdnZXIkLnBpcGUoXG4gICAgICBkZWJvdW5jZVRpbWUoMzAwKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKVxuICAgICkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgIHRoaXMuZXhlY3V0ZVNlYXJjaCgpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuYXV0b1NlYXJjaEFmdGVyVmlld0luaXQpIHtcbiAgICAgIHRoaXMudHJpZ2dlclNlYXJjaCgpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlc1snY29scyddKSB7XG4gICAgICB0aGlzLmNhbGN1bGF0ZUNvbHVtbldpZHRocygpO1xuICAgIH1cbiAgICBpZiAoY2hhbmdlc1snaW5wdXRTZWFyY2gnXSAmJiAhY2hhbmdlc1snaW5wdXRTZWFyY2gnXS5maXJzdENoYW5nZSkge1xuICAgICAgdGhpcy5vZmZzZXQgPSAwO1xuICAgICAgdGhpcy50cmlnZ2VyU2VhcmNoKCk7XG4gICAgfVxuICB9XG5cbiAgb25QYWdlQ2hhbmdlKGV2ZW50OiBQYWdpbmF0b3JTdGF0ZSk6IHZvaWQge1xuICAgIGlmIChldmVudC5yb3dzICE9PSB0aGlzLmxpbWl0KSB7XG4gICAgICB0aGlzLmxpbWl0ID0gZXZlbnQucm93cztcbiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAwO1xuICAgICAgdGhpcy5vZmZzZXQgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1cnJlbnRQYWdlID0gZXZlbnQucGFnZTtcbiAgICAgIHRoaXMub2Zmc2V0ID0gZXZlbnQuZmlyc3Q7XG4gICAgfVxuICAgIHRoaXMudHJpZ2dlclNlYXJjaCgpO1xuICB9XG5cbiAgb25Sb3dzQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDtcbiAgICB0aGlzLnRyaWdnZXJTZWFyY2goKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJpZ2dlclNlYXJjaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc1RyaWdnZXJpbmdTZWFyY2gpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzVHJpZ2dlcmluZ1NlYXJjaCA9IHRydWU7XG4gICAgdGhpcy5zZWFyY2hUcmlnZ2VyJC5uZXh0KCk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaXNUcmlnZ2VyaW5nU2VhcmNoID0gZmFsc2U7XG4gICAgfSwgMjAwKTtcbiAgfVxuXG4gIHByaXZhdGUgZXhlY3V0ZVNlYXJjaCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmF1dG9TZWFyY2hBZnRlclZpZXdJbml0ICYmICghdGhpcy5pbnB1dFNlYXJjaCB8fCBPYmplY3Qua2V5cyh0aGlzLmlucHV0U2VhcmNoKS5sZW5ndGggPT09IDApKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpbnB1dFNlYXJjaFxuICAgIGlmICh0aGlzLmlucHV0U2VhcmNoKSB7XG4gICAgICBpbnB1dFNlYXJjaCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5pbnB1dFNlYXJjaCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dFNlYXJjaCA9IHt9O1xuICAgIH1cbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSB7IC4uLmlucHV0U2VhcmNoLCBvZmZzZXQ6IHRoaXMub2Zmc2V0LCBwYWdlOiB0aGlzLmN1cnJlbnRQYWdlLCBzaXplOiB0aGlzLmxpbWl0IH07XG5cbiAgICBpZiAodGhpcy5nZXRMaXN0JCkge1xuICAgICAgdGhpcy5kYXRhcyA9IFtdO1xuICAgICAgdGhpcy50b3RhbFJlY29yZHMgPSAwO1xuICAgICAgY29uc3QgdGFibGVXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnAtZGF0YXRhYmxlLXdyYXBwZXInKTtcbiAgICAgIGlmICh0YWJsZVdyYXBwZXIpIHtcbiAgICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbFRvKHsgdG9wOiAwIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5nZXRMaXN0JChzZWFyY2hQYXJhbXMpLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQ6IChyZXN1bHQpID0+IHtcbiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuZGF0YXMgPSByZXN1bHQuaXRlbXM7XG4gICAgICAgICAgdGhpcy50b3RhbFJlY29yZHMgPSByZXN1bHQudG90YWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb25Sb3dTZWxlY3QoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Sb3dTZWxlY3RlZC5lbWl0KHRoaXMuc2VsZWN0ZWRSb3cpO1xuICAgIGlmICh0aGlzLnNlbGVjdFZpZXdEZXRhaWxNb2RlKSB7XG4gICAgICB0aGlzLmNkci5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBjYWxjdWxhdGVDb2x1bW5XaWR0aHMoKTogdm9pZCB7XG4gICAgbGV0IHRvdGFsV2lkdGggPSAwO1xuXG4gICAgdGhpcy5jb2xzLmZvckVhY2goY29sID0+IHtcbiAgICAgIGlmICghY29sLmhpZGRlbikge1xuICAgICAgICBpZiAoIWNvbC53aWR0aCkge1xuICAgICAgICAgIGNvbC53aWR0aCA9ICcxMDAnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2wudHlwZSA9PT0gJ2luZGV4JyB8fCBjb2wudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgIGNvbC53aWR0aCA9ICc2MCc7XG4gICAgICAgIH1cbiAgICAgICAgY29sLndpZHRoID0gY29sLndpZHRoLnJlcGxhY2UoJ3B4JywgJycpO1xuICAgICAgICBjb25zdCB3aWR0aFZhbHVlID0gcGFyc2VJbnQoY29sLndpZHRoLnJlcGxhY2UoJ3B4JywgJycpLCAxMCk7XG4gICAgICAgIHRvdGFsV2lkdGggKz0gd2lkdGhWYWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMudG90YWxXaWR0aCA9IHRvdGFsV2lkdGg7XG4gICAgdGhpcy5jb2xzLmZvckVhY2goY29sID0+IHtcbiAgICAgIGlmICghY29sLmhpZGRlbikge1xuICAgICAgICBjb25zdCB3aWR0aFZhbHVlID0gcGFyc2VJbnQoY29sLndpZHRoLnJlcGxhY2UoJ3B4JywgJycpLCAxMCk7XG4gICAgICAgIGNvbC5wZXJjZW50V2lkdGggPSAoKHdpZHRoVmFsdWUgLyB0b3RhbFdpZHRoKSAqIDEwMCkudG9GaXhlZCgyKSArICclJztcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNoZWNrV2l0aFNlbGVjdEFsbChldmVudDogYW55KTogdm9pZCB7XG4gICAgaWYgKGV2ZW50LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuY2RyLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIGxldCBjb2wgPSB0aGlzLmNvbHMuZmluZChjb2wgPT4gY29sLnR5cGUgPT09ICdjaGVja2JveCcpO1xuICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IHRoaXMuc2VsZWN0ZWRSb3cuZmlsdGVyKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuICgoIWNvbD8uZm9ybWF0IHx8IChjb2wuZm9ybWF0IGluIGRhdGEgJiYgZGF0YVtjb2wuZm9ybWF0XSA9PT0gdHJ1ZSkpKVxuICAgICAgfSk7XG4gICAgICB0aGlzLm9uUm93U2VsZWN0ZWQuZW1pdCh0aGlzLnNlbGVjdGVkUm93KTtcblxuICAgIH1cbiAgfVxufSIsIjxkaXYgY2xhc3M9XCJmbGV4IGZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1iZXR3ZWVuXCIgKm5nSWY9XCJoYXZlUGFnaW5hdG9yXCI+XG4gIDxkaXYgY2xhc3M9XCJmbGV4IGdhcC0yIGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgIDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxMnB4OyBsaW5lLWhlaWdodDogMTZweDtcIj4ge3snc2hvd2luZ1JlY29yZHMnIHwgdHJhbnNsYXRlOiB7IGZpcnN0OiB0b3RhbFJlY29yZHM/IChvZmZzZXQrMVxuICAgICAgfCBudW1iZXIpOlxuICAgICAgMCwgbGFzdDogKCgob2Zmc2V0ICsgbGltaXQpIDwgdG90YWxSZWNvcmRzID8gKG9mZnNldCArIGxpbWl0KSA6IHRvdGFsUmVjb3JkcyApfCBudW1iZXIpLCB0b3RhbCA6ICh0b3RhbFJlY29yZHMgfFxuICAgICAgICBudW1iZXIpIH0gfX0gPC9zcGFuPlxuICAgICAgICA8cC1kcm9wZG93biBbb3B0aW9uc109XCJvcHRpb25QYWdpbmF0b3JzXCIgY2xhc3M9XCJjdXN0b20tc2VsZWN0LXBhZ2luYXRvclwiIG9wdGlvbkxhYmVsPVwibGFiZWxcIiBvcHRpb25WYWx1ZT1cInZhbHVlXCJcbiAgICAgICAgICBbKG5nTW9kZWwpXT1cImxpbWl0XCIgKG5nTW9kZWxDaGFuZ2UpPVwib25Sb3dzQ2hhbmdlKClcIiAvPlxuICA8L2Rpdj5cbiAgPHAtcGFnaW5hdG9yIFtmaXJzdF09XCJvZmZzZXRcIiBjbGFzcz1cImN1c3RvbS1wYWdpbmF0b3JcIiBbcm93c109XCJsaW1pdFwiIFt0b3RhbFJlY29yZHNdPVwidG90YWxSZWNvcmRzXCJcbiAgICAob25QYWdlQ2hhbmdlKT1cIm9uUGFnZUNoYW5nZSgkZXZlbnQpXCIgW3Nob3dDdXJyZW50UGFnZVJlcG9ydF09XCJmYWxzZVwiIGN1cnJlbnRQYWdlUmVwb3J0VGVtcGxhdGU9XCJcIj48L3AtcGFnaW5hdG9yPlxuPC9kaXY+XG48cC10YWJsZSAob25IZWFkZXJDaGVja2JveFRvZ2dsZSk9XCJjaGVja1dpdGhTZWxlY3RBbGwoJGV2ZW50KVwiIFtzZWxlY3Rpb25Nb2RlXT1cInNlbGVjdGlvbk1vZGVcIiBjbGFzcz1cImR5bmFtaWMtdGFibGVcIlxuICBbKHNlbGVjdGlvbildPVwic2VsZWN0ZWRSb3dcIiBbc2Nyb2xsYWJsZV09XCJ0cnVlXCIgW3Njcm9sbEhlaWdodF09XCJzY3JvbGxIZWlnaHRcIiBbYXV0b0xheW91dF09XCJmYWxzZVwiXG4gIChzZWxlY3Rpb25DaGFuZ2UpPVwib25Sb3dTZWxlY3QoJGV2ZW50KVwiIFtjb2x1bW5zXT1cImNvbHNcIiBbdmFsdWVdPVwiZGF0YXNcIiBbbG9hZGluZ109XCJpc0xvYWRpbmdcIj5cbiAgPG5nLXRlbXBsYXRlIHBUZW1wbGF0ZT1cImNvbGdyb3VwXCIgbGV0LWNvbHVtbnM+XG4gICAgPGNvbGdyb3VwPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY29sIG9mIGNvbHVtbnNcIj5cbiAgICAgICAgPGNvbCAqbmdJZj1cIiFjb2wuaGlkZGVuICYmICEoY29sLnR5cGU9PSdpbmRleCcgfHwgY29sLnR5cGUgPT0gJ2NoZWNrYm94JylcIiBbc3R5bGUubWluLXdpZHRoXT1cImNvbC53aWR0aCArJ3B4J1wiXG4gICAgICAgICAgW3N0eWxlLndpZHRoXT1cImNvbC5wZXJjZW50V2lkdGhcIiAvPlxuICAgICAgICA8Y29sICpuZ0lmPVwiIGNvbC50eXBlPT0naW5kZXgnIHx8IGNvbC50eXBlID09ICdjaGVja2JveCdcIiBbc3R5bGUud2lkdGhdPVwiY29sLnBlcmNlbnRXaWR0aFwiIC8+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L2NvbGdyb3VwPlxuICA8L25nLXRlbXBsYXRlPlxuICA8bmctdGVtcGxhdGUgcFRlbXBsYXRlPVwiaGVhZGVyXCIgbGV0LWNvbHVtbnM+XG4gICAgPHRyIGNsYXNzPVwidGFibGUtaGVhZGVyXCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBjb2wgb2YgY29sdW1uc1wiPlxuICAgICAgICA8dGggW3N0eWxlXT1cInsnd2lkdGgnOiBjb2wucGVyY2VudFdpZHRoLCdtaW4td2lkdGgnOiBjb2wud2lkdGggKydweCd9XCJcbiAgICAgICAgICAqbmdJZj1cIiFjb2wuaGlkZGVuICYmIGNvbC50eXBlICE9PSdjaGVja2JveCdcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9uZS1saW5lXCIgdG9vbHRpcFN0eWxlQ2xhc3M9XCJjdXN0b210b29sdGlwXCIgW3BUb29sdGlwXT1cIiAoY29sLmhlYWRlciB8IHRyYW5zbGF0ZSkgfHwgJydcIlxuICAgICAgICAgICAgW2NsYXNzLmZsb2F0LXJpZ2h0XT1cImNvbC50eXBlID09PSAnbnVtYmVyJyB8fCBjb2wudHlwZT09PSdjdXJyZW5jeSdcIiB0b29sdGlwUG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgICAgIHt7IGNvbC5oZWFkZXIgfCB0cmFuc2xhdGV9fTwvc3Bhbj5cbiAgICAgICAgPC90aD5cbiAgICAgICAgPHRoICpuZ0lmPVwiIWNvbC5oaWRkZW4gJiYgY29sLnR5cGUgPT09ICdjaGVja2JveCdcIj5cbiAgICAgICAgICA8cC10YWJsZUhlYWRlckNoZWNrYm94PjwvcC10YWJsZUhlYWRlckNoZWNrYm94PlxuICAgICAgICA8L3RoPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC90cj5cbiAgICA8bmctY29udGVudCAqbmdJZj1cInBsYWNlRm9vdGVyID09J3RvcCdcIiBzZWxlY3Q9XCJbZm9vdGVyXVwiPjwvbmctY29udGVudD5cbiAgPC9uZy10ZW1wbGF0ZT5cbiAgPG5nLXRlbXBsYXRlIHBUZW1wbGF0ZT1cImJvZHlcIiBsZXQtZGF0YSBsZXQtaT0ncm93SW5kZXgnIGxldC1jb2x1bW5zPVwiY29sdW1uc1wiPlxuICAgIDx0ciBjbGFzcz1cInRhYmxlLWJvZHlcIiBbcFNlbGVjdGFibGVSb3ddPVwiZGF0YVwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgY29sIG9mIGNvbHVtbnNcIj5cbiAgICAgICAgPHRkIChjbGljayk9XCJvbkNsaWNrUm93LmVtaXQoZGF0YSlcIiBbc3R5bGVdPVwieyd3aWR0aCc6IGNvbC5wZXJjZW50V2lkdGgsJ21pbi13aWR0aCc6IGNvbC53aWR0aCArJ3B4J31cIiAqbmdJZj1cIiFjb2wuaGlkZGVuXCI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbC50eXBlID09ICd0ZW1wbGF0ZScmJiB0ZW1wbGF0ZUNlbGxUZW1wbGF0ZTsgZWxzZSBkZWZhdWx0Q2VsbFwiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lclxuICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cInRlbXBsYXRlQ2VsbFRlbXBsYXRlOyBjb250ZXh0OiB7ICRpbXBsaWNpdDogZGF0YSwgY29sdW1uOiBjb2wgfVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdENlbGw+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sLnR5cGUgID09ICdjaGVja2JveCcgICYmICghY29sLmZvcm1hdCB8fCBkYXRhW2NvbC5mb3JtYXRdPT09IHRydWUpXCI+XG4gICAgICAgICAgICAgIDxwLXRhYmxlQ2hlY2tib3ggW3ZhbHVlXT1cImRhdGFcIiAoY2xpY2spPVwiJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXCI+PC9wLXRhYmxlQ2hlY2tib3g+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbC50eXBlID09ICdpbmRleCdcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJvbmUtbGluZSBcIj5cbiAgICAgICAgICAgICAgICB7eyBvZmZzZXQgKyBpICsgMSB9fVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sLnR5cGUgXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwib25lLWxpbmVcIiB0b29sdGlwU3R5bGVDbGFzcz1cImN1c3RvbXRvb2x0aXBcIiBbcFRvb2x0aXBdPVwiZGF0YVtjb2wuZmllbGRdIHx8ICcnXCJcbiAgICAgICAgICAgICAgICB0b29sdGlwUG9zaXRpb249XCJib3R0b21cIj5cbiAgICAgICAgICAgICAgICB7eyBkYXRhW2NvbC5maWVsZF0gfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29sLnR5cGUgPT0gJ2RhdGUnXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwib25lLWxpbmVcIiB0b29sdGlwU3R5bGVDbGFzcz1cImN1c3RvbXRvb2x0aXBcIlxuICAgICAgICAgICAgICAgIFtwVG9vbHRpcF09XCIoZGF0YVtjb2wuZmllbGRdIHwgZGF0ZTogKGNvbC5mb3JtYXQgfHwgJ2RkL01NL1lZWVknKSApIHx8ICcnXCIgdG9vbHRpcFBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICAgICAgICAgICAge3sgZGF0YVtjb2wuZmllbGRdIHwgZGF0ZTogKGNvbC5mb3JtYXQgfHwgJ2RkL01NL1lZWVknKSB9fVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2wudHlwZSA9PSAnY3VycmVuY3knXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwib25lLWxpbmUgZmxvYXQtcmlnaHRcIiB0b29sdGlwU3R5bGVDbGFzcz1cImN1c3RvbXRvb2x0aXBcIlxuICAgICAgICAgICAgICAgIFtwVG9vbHRpcF09XCIoZGF0YVtjb2wuZmllbGRdIHwgY3VzdG9tQ3VycmVuY3k6IChkYXRhW2NvbC5mb3JtYXRdKSApIHx8ICcnXCIgdG9vbHRpcFBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICAgICAgICAgICAge3sgZGF0YVtjb2wuZmllbGRdIHwgY3VzdG9tQ3VycmVuY3k6IChkYXRhW2NvbC5mb3JtYXRdKSB9fVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJjb2wudHlwZSA9PSAnbnVtYmVyJ1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm9uZS1saW5lIGZsb2F0LXJpZ2h0XCIgdG9vbHRpcFN0eWxlQ2xhc3M9XCJjdXN0b210b29sdGlwXCJcbiAgICAgICAgICAgICAgICBbcFRvb2x0aXBdPVwiKGRhdGFbY29sLmZpZWxkXSB8IG51bWJlcjogKGNvbC5mb3JtYXQgfHwgJzEuMC0wJykpIHx8ICcnXCIgdG9vbHRpcFBvc2l0aW9uPVwiYm90dG9tXCI+XG4gICAgICAgICAgICAgICAge3sgZGF0YVtjb2wuZmllbGRdIHwgbnVtYmVyOiAoY29sLmZvcm1hdCB8fCAnMS4wLTAnKSB9fVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICA8L3RkPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC90cj5cbiAgPC9uZy10ZW1wbGF0ZT5cbiAgPG5nLXRlbXBsYXRlIHBUZW1wbGF0ZT1cImxvYWRpbmdib2R5XCIgbGV0LWNvbHVtbnM9XCJjb2x1bW5zXCI+XG4gICAgPGRpdiBjbGFzcz1cInYtdGFibGUtb3ZlcmxheVwiICpuZ0lmPVwiaXNMb2FkaW5nXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidi10YWJsZS1zcGlubmVyIHYtdGFibGUtbG9hZGVyXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwidi10YWJsZS10ZXh0XCI+UGxlYXNlIHdhaXQuLi48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2ICpuZ0lmPVwiaXNMb2FkaW5nXCIgW3N0eWxlXT1cIntoZWlnaHQ6ICdjYWxjKC01MHB4ICsgJytzY3JvbGxIZWlnaHQgKycpJ31cIj48L2Rpdj5cbiAgPC9uZy10ZW1wbGF0ZT5cbiAgPG5nLXRlbXBsYXRlICpuZ0lmPVwicGxhY2VGb290ZXIgPT0nYm90dG9tJ1wiIHBUZW1wbGF0ZT1cImZvb3RlclwiPlxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIltmb290ZXJdXCI+PC9uZy1jb250ZW50PlxuICA8L25nLXRlbXBsYXRlPlxuICA8bmctdGVtcGxhdGUgcFRlbXBsYXRlPSdlbXB0eW1lc3NhZ2UnIGxldC1jb2x1bW5zPlxuICAgIDx0cj5cbiAgICAgIDx0ZCBbc3R5bGVdPVwie2hlaWdodDogJ2NhbGMoLTUwcHggKyAnK3Njcm9sbEhlaWdodCArJyknfVwiIFthdHRyLmNvbHNwYW5dPScxMDAwJz5cbiAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJub3REYXRhVHBsXCI+PC9uZy1jb250YWluZXI+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvbmctdGVtcGxhdGU+XG48L3AtdGFibGU+XG48bmctdGVtcGxhdGUgI25vdERhdGFUcGw+XG4gIDxkaXYgY2xhc3M9XCJuby1kYXRhLWNvbnRhaW5lclwiPlxuICAgIDxpbWcgc3JjPVwiYXNzZXRzL2ltYWdlcy9uby1kYXRhLnBuZ1wiIGFsdD1cIk5vIERhdGFcIiBjbGFzcz1cIm5vLWRhdGEtaW1hZ2VcIiAvPlxuICAgIDxwIGNsYXNzPVwibm8tZGF0YS1tZXNzYWdlXCI+e3snbm9SZXN1bHRGb3VuZCcgfCB0cmFuc2xhdGV9fTwvcD5cbiAgICA8cCBjbGFzcz1cIm5vLWRhdGEtc3VibWVzc2FnZVwiPnt7J25vUmVzdWx0Rm91bmREZXNjJyB8IHRyYW5zbGF0ZX19PC9wPlxuICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG48IS0tIDxhcHAtY29uZmlnLWRpc3BsYXkgW2NvbHNdPVwiY29sc1wiPjwvYXBwLWNvbmZpZy1kaXNwbGF5PiAtLT4iXX0=