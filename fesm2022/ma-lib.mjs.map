{"version":3,"file":"ma-lib.mjs","sources":["../../../projects/ma-lib/src/lib/ma-lib.service.ts","../../../projects/ma-lib/src/lib/ma-lib.component.ts","../../../projects/ma-lib/src/lib/ma-directives/ma-permission.directive.ts","../../../projects/ma-lib/src/lib/ma-lib.module.ts","../../../projects/ma-lib/src/public-api.ts","../../../projects/ma-lib/src/ma-lib.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { MessageService } from 'primeng/api';\nimport { BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MaLibService {\n\n\n  private loadingSubject = new BehaviorSubject<boolean>(false);\n\n\n  private permissions: string[] = [];\n\n\n  constructor(\n    private messageService: MessageService,\n  ) { }\n\n\n  handleError(error: any) {\n    this.messageService.add({\n      severity: 'error',\n      summary: 'Error',\n      detail: error?.message || 'An unexpected error occurred.'\n    });\n  }\n\n  showLoading() {\n    this.loadingSubject.next(true);\n  }\n  hideLoading() {\n    this.loadingSubject.next(false);\n  }\n  getLoading() {\n    return this.loadingSubject.asObservable();\n  }\n\n  public setPermissions(perms: string[]) {\n    this.permissions = perms;\n  }\n\n  public getPermissions() {\n    return this.permissions;\n  }\n\n  hasPermission(p: string | string[]): boolean {\n    const list = Array.isArray(p) ? p : [p];\n    return list.some(x => this.permissions.includes(x));\n  }\n\n}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'lib-ma-lib',\n  template: `\n    <p>\n      ma-lib works!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class MaLibComponent {\n\n}\n","import { Directive, ElementRef, Input, OnInit, Renderer2 } from '@angular/core';\nimport { MaLibService } from '../ma-lib.service';\n\n@Directive({\n  selector: '[maPermission]'\n})\nexport class MaPermissionDirective implements OnInit {\n  @Input('maPermission') requiredPermissions: string | string[] = [];\n  @Input() mode: 'disable' | 'hide' = 'disable';\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private permissionService: MaLibService\n  ) {\n  }\n\n  ngOnInit() {\n    const permissions = Array.isArray(this.requiredPermissions)\n      ? this.requiredPermissions\n      : [this.requiredPermissions];\n\n    const hasPermission = permissions.some(p =>\n      this.permissionService.hasPermission(p)\n    );\n\n    if (!hasPermission) {\n      if (this.mode === 'disable') {\n        this.renderer.setProperty(this.el.nativeElement, 'disabled', true);\n        this.renderer.addClass(this.el.nativeElement, 'disabled');\n      } else if (this.mode === 'hide') {\n        this.renderer.setStyle(this.el.nativeElement, 'display', 'none');\n      }\n    }\n  }\n}","import { NgModule } from '@angular/core';\nimport { MaLibComponent } from './ma-lib.component';\nimport { MaPermissionDirective } from './ma-directives/ma-permission.directive';\n\n\n\n@NgModule({\n  declarations: [\n    MaLibComponent,\n    MaPermissionDirective\n  ],\n  imports: [\n  ],\n  exports: [\n    MaLibComponent,\n    MaPermissionDirective\n  ]\n})\nexport class MaLibModule {\n}\n","/*\n * Public API Surface of ma-lib\n */\n\nexport * from './lib/ma-lib.service';\nexport * from './lib/ma-lib.component';\nexport * from './lib/ma-lib.module';\nexport * from './lib/ma-directives/ma-permission.directive';","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.MaLibService"],"mappings":";;;;;MAOa,YAAY,CAAA;AASvB,IAAA,WAAA,CACU,cAA8B,EAAA;QAA9B,IAAc,CAAA,cAAA,GAAd,cAAc,CAAgB;AAPhC,QAAA,IAAA,CAAA,cAAc,GAAG,IAAI,eAAe,CAAU,KAAK,CAAC,CAAC;QAGrD,IAAW,CAAA,WAAA,GAAa,EAAE,CAAC;KAK9B;AAGL,IAAA,WAAW,CAAC,KAAU,EAAA;AACpB,QAAA,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC;AACtB,YAAA,QAAQ,EAAE,OAAO;AACjB,YAAA,OAAO,EAAE,OAAO;AAChB,YAAA,MAAM,EAAE,KAAK,EAAE,OAAO,IAAI,+BAA+B;AAC1D,SAAA,CAAC,CAAC;KACJ;IAED,WAAW,GAAA;AACT,QAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAChC;IACD,WAAW,GAAA;AACT,QAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACjC;IACD,UAAU,GAAA;AACR,QAAA,OAAO,IAAI,CAAC,cAAc,CAAC,YAAY,EAAE,CAAC;KAC3C;AAEM,IAAA,cAAc,CAAC,KAAe,EAAA;AACnC,QAAA,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC1B;IAEM,cAAc,GAAA;QACnB,OAAO,IAAI,CAAC,WAAW,CAAC;KACzB;AAED,IAAA,aAAa,CAAC,CAAoB,EAAA;AAChC,QAAA,MAAM,IAAI,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACxC,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;KACrD;+GA3CU,YAAY,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,cAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA,EAAA;AAAZ,IAAA,SAAA,IAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,YAAY,cAFX,MAAM,EAAA,CAAA,CAAA,EAAA;;4FAEP,YAAY,EAAA,UAAA,EAAA,CAAA;kBAHxB,UAAU;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,UAAU,EAAE,MAAM;AACnB,iBAAA,CAAA;;;MCMY,cAAc,CAAA;+GAAd,cAAc,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;AAAd,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,IAAA,EAAA,cAAc,EARf,QAAA,EAAA,YAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAAA,CAAA;;;;AAIT,EAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,CAAA,EAAA;;4FAIU,cAAc,EAAA,UAAA,EAAA,CAAA;kBAV1B,SAAS;AACE,YAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,YAAY,EACZ,QAAA,EAAA,CAAA;;;;AAIT,EAAA,CAAA,EAAA,CAAA;;;MCFU,qBAAqB,CAAA;AAIhC,IAAA,WAAA,CACU,EAAc,EACd,QAAmB,EACnB,iBAA+B,EAAA;QAF/B,IAAE,CAAA,EAAA,GAAF,EAAE,CAAY;QACd,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAW;QACnB,IAAiB,CAAA,iBAAA,GAAjB,iBAAiB,CAAc;QANlB,IAAmB,CAAA,mBAAA,GAAsB,EAAE,CAAC;QAC1D,IAAI,CAAA,IAAA,GAAuB,SAAS,CAAC;KAO7C;IAED,QAAQ,GAAA;QACN,MAAM,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC;cACvD,IAAI,CAAC,mBAAmB;AAC1B,cAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;AAE/B,QAAA,MAAM,aAAa,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,IACtC,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC,CACxC,CAAC;QAEF,IAAI,CAAC,aAAa,EAAE;AAClB,YAAA,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;AAC3B,gBAAA,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC;AACnE,gBAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;AAC3D,aAAA;AAAM,iBAAA,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;AAC/B,gBAAA,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;AAClE,aAAA;AACF,SAAA;KACF;+GA5BU,qBAAqB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,UAAA,EAAA,EAAA,EAAA,KAAA,EAAA,EAAA,CAAA,SAAA,EAAA,EAAA,EAAA,KAAA,EAAAA,YAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAArB,qBAAqB,EAAA,QAAA,EAAA,gBAAA,EAAA,MAAA,EAAA,EAAA,mBAAA,EAAA,CAAA,cAAA,EAAA,qBAAA,CAAA,EAAA,IAAA,EAAA,MAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAArB,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBAHjC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,QAAQ,EAAE,gBAAgB;AAC3B,iBAAA,CAAA;iJAEwB,mBAAmB,EAAA,CAAA;sBAAzC,KAAK;uBAAC,cAAc,CAAA;gBACZ,IAAI,EAAA,CAAA;sBAAZ,KAAK;;;MCUK,WAAW,CAAA;+GAAX,WAAW,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA,EAAA;AAAX,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,EAAA,CAAA,mBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,SAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAW,iBAVpB,cAAc;AACd,YAAA,qBAAqB,aAKrB,cAAc;YACd,qBAAqB,CAAA,EAAA,CAAA,CAAA,EAAA;gHAGZ,WAAW,EAAA,CAAA,CAAA,EAAA;;4FAAX,WAAW,EAAA,UAAA,EAAA,CAAA;kBAZvB,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;AACR,oBAAA,YAAY,EAAE;wBACZ,cAAc;wBACd,qBAAqB;AACtB,qBAAA;AACD,oBAAA,OAAO,EAAE,EACR;AACD,oBAAA,OAAO,EAAE;wBACP,cAAc;wBACd,qBAAqB;AACtB,qBAAA;AACF,iBAAA,CAAA;;;ACjBD;;AAEG;;ACFH;;AAEG;;;;"}